{
  "metadata": {
    "name": "cicd-java-main-finance-b38758a4-hhjbb",
    "generateName": "cicd-java-main-finance-b38758a4-",
    "namespace": "argo-workflows",
    "uid": "40b8604f-dc71-487c-860b-ca891e0a4c70",
    "resourceVersion": "26452413",
    "generation": 17,
    "creationTimestamp": "2026-01-20T14:28:05Z",
    "labels": {
      "branch": "main",
      "events.argoproj.io/action-timestamp": "1768458297241",
      "events.argoproj.io/sensor": "cicd-sensor",
      "events.argoproj.io/trigger": "gitlab-workflow-main",
      "project_id": "7",
      "repository": "finance",
      "workflows.argoproj.io/completed": "true",
      "workflows.argoproj.io/creator": "2a55ea4f-4623-4622-a5b4-d631623e2109",
      "workflows.argoproj.io/creator-preferred-username": "admin",
      "workflows.argoproj.io/phase": "Failed",
      "workflows.argoproj.io/resubmitted-from-workflow": "cicd-java-main-finance-b38758a4-l68lq"
    },
    "annotations": {
      "trigger.workflows.job/AUTHOR": "Eric",
      "trigger.workflows.job/CHECKOUT_SHA": "b38758a4d38cd25468a9ab11c888a9b4bbc318b2",
      "workflows.argoproj.io/pod-name-format": "v2"
    },
    "managedFields": [
      {
        "manager": "argo",
        "operation": "Update",
        "apiVersion": "argoproj.io/v1alpha1",
        "time": "2026-01-20T14:33:07Z",
        "fieldsType": "FieldsV1",
        "fieldsV1": {
          "f:metadata": {
            "f:annotations": {
              ".": {},
              "f:trigger.workflows.job/AUTHOR": {},
              "f:trigger.workflows.job/CHECKOUT_SHA": {},
              "f:workflows.argoproj.io/pod-name-format": {}
            },
            "f:generateName": {},
            "f:labels": {
              ".": {},
              "f:branch": {},
              "f:events.argoproj.io/action-timestamp": {},
              "f:events.argoproj.io/sensor": {},
              "f:events.argoproj.io/trigger": {},
              "f:project_id": {},
              "f:repository": {},
              "f:workflows.argoproj.io/creator": {},
              "f:workflows.argoproj.io/creator-preferred-username": {},
              "f:workflows.argoproj.io/resubmitted-from-workflow": {}
            }
          },
          "f:spec": {}
        }
      },
      {
        "manager": "workflow-controller",
        "operation": "Update",
        "apiVersion": "argoproj.io/v1alpha1",
        "time": "2026-01-20T14:33:41Z",
        "fieldsType": "FieldsV1",
        "fieldsV1": {
          "f:metadata": {
            "f:labels": {
              "f:workflows.argoproj.io/completed": {},
              "f:workflows.argoproj.io/phase": {}
            }
          },
          "f:status": {}
        }
      }
    ]
  },
  "spec": {
    "entrypoint": "main",
    "arguments": {
      "parameters": [
        {
          "name": "GIT_REPOSITORY_URL",
          "value": "https://gitlab.xxxx.xxxx.xx/fawve/finance.git"
        },
        {
          "name": "GIT_PUSH_REF",
          "value": "main"
        },
        {
          "name": "GIT_REPOSITORY_NAME",
          "value": "finance"
        },
        {
          "name": "GIT_CHECKOUT_SHA",
          "value": "b38758a4d38cd25468a9ab11c888a9b4bbc318b2"
        },
        {
          "name": "GIT_BEFORE_SHA",
          "value": "d67ea3643e87d813cbd8ff069a3d1e2710cacf57"
        },
        {
          "name": "CI_ENVIRONMENT_NAME",
          "value": "main"
        },
        {
          "name": "CI_REGISTRY_URL",
          "value": "https://registry.xxxx.xxxx.xx"
        },
        {
          "name": "CONTAINER_PLATFORM",
          "value": "linux/arm64"
        },
        {
          "name": "GIT_DEPLOY_REPOSITORY_URL",
          "value": "https://gitlab.xxxx.xxxx.xx/fawve/deploy.git"
        },
        {
          "name": "WORKFLOWS_API_DOMAIN",
          "value": "workflows.xxxx.xxxx.xx"
        },
        {
          "name": "WORKFLOWS_API_NAMESPACE",
          "value": "workflows"
        },
        {
          "name": "WORKFLOWS_API_PROJECT_ID",
          "value": "7"
        },
        {
          "name": "WORKFLOWS_API_REPOSITORY",
          "value": "finance"
        },
        {
          "name": "WORKFLOWS_API_BRANCH",
          "value": "main"
        },
        {
          "name": "TRIGGER_WORKFLOWS_JOB_AUTHOR",
          "value": "Eric"
        },
        {
          "name": "CI_DEBUG_TRACE",
          "value": "false"
        },
        {
          "name": "GIT_DEPLOY_BRANCH_NAME",
          "value": "main"
        },
        {
          "name": "NOTIFICATION_DINGTALK_BOT_ADDR",
          "value": "http://dingtalk-bot.argo-workflows.svc.cluster.local:8000"
        },
        {
          "name": "NOTIFICATION_CARD_TEMPLATE_ID",
          "value": "98a61096-31e1-4611-be4e-b1d2f6897225.schema"
        },
        {
          "name": "NOTIFICATION_OPEN_CONVERSATION_ID",
          "value": "cidUQXUpOwFEbiRNp87JyFE3w=="
        }
      ]
    },
    "podGC": {
      "strategy": "OnPodSuccess"
    },
    "shutdown": "Terminate",
    "workflowTemplateRef": {
      "name": "ci-java-jagat"
    }
  },
  "status": {
    "phase": "Failed",
    "startedAt": "2026-01-20T14:28:06Z",
    "finishedAt": "2026-01-20T14:33:40Z",
    "progress": "7/11",
    "message": "Stopped with strategy 'Terminate'",
    "nodes": {
      "cicd-java-main-finance-b38758a4-hhjbb": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb",
        "name": "cicd-java-main-finance-b38758a4-hhjbb",
        "displayName": "cicd-java-main-finance-b38758a4-hhjbb",
        "type": "DAG",
        "templateName": "main",
        "templateScope": "local/",
        "phase": "Failed",
        "startedAt": "2026-01-20T14:28:06Z",
        "finishedAt": "2026-01-20T14:33:17Z",
        "progress": "7/11",
        "resourcesDuration": {
          "cpu": 42,
          "memory": 475
        },
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-2553748563",
          "cicd-java-main-finance-b38758a4-hhjbb-2131133452"
        ],
        "outboundNodes": [
          "cicd-java-main-finance-b38758a4-hhjbb-2775002877",
          "cicd-java-main-finance-b38758a4-hhjbb-247794171"
        ]
      },
      "cicd-java-main-finance-b38758a4-hhjbb-2131133452": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-2131133452",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.previous-commit-sha",
        "displayName": "previous-commit-sha",
        "type": "Pod",
        "templateName": "get-previous-successful-commit-sha",
        "templateScope": "local/",
        "phase": "Succeeded",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "startedAt": "2026-01-20T14:28:06Z",
        "finishedAt": "2026-01-20T14:28:21Z",
        "progress": "1/1",
        "resourcesDuration": {
          "cpu": 0,
          "memory": 10
        },
        "inputs": {
          "parameters": [
            {
              "name": "WORKFLOWS_API_DOMAIN",
              "value": "workflows.xxxx.xxxx.xx"
            },
            {
              "name": "WORKFLOWS_API_NAMESPACE",
              "value": "workflows"
            },
            {
              "name": "WORKFLOWS_API_PROJECT_ID",
              "value": "7"
            },
            {
              "name": "WORKFLOWS_API_REPOSITORY",
              "value": "finance"
            },
            {
              "name": "WORKFLOWS_API_BRANCH",
              "value": "main"
            },
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "/tmp/PREVIOUS_CHECKOUT_SHA"
            },
            {
              "name": "CURRENT_GIT_CHECKOUT_SHA",
              "value": "b38758a4d38cd25468a9ab11c888a9b4bbc318b2",
              "description": "本次任务的 Commit SHA 值，用于判断是否重复执行任务"
            }
          ]
        },
        "outputs": {
          "parameters": [
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "0000000000000000000000000000000000000000",
              "valueFrom": {
                "path": "/tmp/PREVIOUS_CHECKOUT_SHA"
              },
              "globalName": "PREVIOUS_CHECKOUT_SHA"
            }
          ],
          "artifacts": [
            {
              "name": "main-logs",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-get-previous-successful-commit-sha-2131133452/main.log"
              }
            }
          ],
          "exitCode": "0"
        },
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-258446681"
        ],
        "hostNodeName": "k8s03.local.ml"
      },
      "cicd-java-main-finance-b38758a4-hhjbb-2449782576": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-2449782576",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.docker-build(0:app:ml.fawve.springcloud:eureka-server:,appname:eureka-server,dir:eureka-server,jar_path:eureka-server/target/eureka-server-0.0.2-SNAPSHOT.jar)",
        "displayName": "docker-build(0:app:ml.fawve.springcloud:eureka-server:,appname:eureka-server,dir:eureka-server,jar_path:eureka-server/target/eureka-server-0.0.2-SNAPSHOT.jar)",
        "type": "Pod",
        "templateName": "container",
        "templateScope": "local/",
        "phase": "Failed",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "message": "workflow shutdown with strategy:  Terminate",
        "startedAt": "2026-01-20T14:32:53Z",
        "finishedAt": "2026-01-20T14:33:17Z",
        "progress": "0/1",
        "inputs": {
          "parameters": [
            {
              "name": "APPNAME",
              "value": "eureka-server"
            },
            {
              "name": "CONTEXT_ROOT",
              "value": "eureka-server"
            },
            {
              "name": "CI_REGISTRY_URL",
              "value": "https://registry.xxxx.xxxx.xx"
            },
            {
              "name": "REGISTRY_CREDENTIAL_SECRET_NAME",
              "value": "container-registry-credential"
            },
            {
              "name": "CI_COMMIT_SHORT_SHA",
              "value": "b38758a"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "dev"
            },
            {
              "name": "CONTAINER_PLATFORM",
              "value": "linux/amd64"
            },
            {
              "name": "PUSH_RETRY",
              "value": "5"
            }
          ]
        },
        "outputs": {
          "artifacts": [
            {
              "name": "main-logs",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-container-2449782576/main.log"
              }
            }
          ],
          "result": "",
          "exitCode": "143"
        },
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-247794171"
        ],
        "hostNodeName": "k8s03.local.ml"
      },
      "cicd-java-main-finance-b38758a4-hhjbb-247794171": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-247794171",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.sync-deploy",
        "displayName": "sync-deploy",
        "type": "Skipped",
        "templateName": "sync-deploy",
        "templateScope": "local/",
        "phase": "Omitted",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "message": "omitted: depends condition not met",
        "startedAt": "2026-01-20T14:33:17Z",
        "finishedAt": "2026-01-20T14:33:17Z",
        "nodeFlag": {}
      },
      "cicd-java-main-finance-b38758a4-hhjbb-2553748563": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-2553748563",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.clone",
        "displayName": "clone",
        "type": "Pod",
        "templateName": "clone",
        "templateScope": "local/",
        "phase": "Succeeded",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "startedAt": "2026-01-20T14:28:06Z",
        "finishedAt": "2026-01-20T14:28:22Z",
        "progress": "1/1",
        "resourcesDuration": {
          "cpu": 0,
          "memory": 13
        },
        "inputs": {
          "parameters": [
            {
              "name": "WORKFLOWS_API_DOMAIN",
              "value": "workflows.xxxx.xxxx.xx"
            },
            {
              "name": "WORKFLOWS_API_NAMESPACE",
              "value": "workflows"
            },
            {
              "name": "WORKFLOWS_API_PROJECT_ID",
              "value": "7"
            },
            {
              "name": "WORKFLOWS_API_REPOSITORY",
              "value": "finance"
            },
            {
              "name": "WORKFLOWS_API_BRANCH",
              "value": "main"
            },
            {
              "name": "GIT_REPOSITORY_URL",
              "value": "https://gitlab.xxxx.xxxx.xx/fawve/finance.git"
            },
            {
              "name": "GIT_PUSH_REF",
              "value": "main"
            },
            {
              "name": "TRIGGER_ACCOUNT",
              "value": "user-01"
            },
            {
              "name": "GIT_CHECKOUT_SHA",
              "value": "b38758a4d38cd25468a9ab11c888a9b4bbc318b2"
            },
            {
              "name": "GIT_REPOSITORY_NAME",
              "value": "finance"
            },
            {
              "name": "OBJECT_KIND",
              "value": "push"
            },
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "/tmp/git/PREVIOUS_CHECKOUT_SHA"
            }
          ]
        },
        "outputs": {
          "parameters": [
            {
              "name": "CI_COMMIT_SHORT_SHA",
              "value": "b38758a",
              "valueFrom": {
                "path": "/tmp/CI_COMMIT_SHORT_SHA"
              },
              "globalName": "CI_COMMIT_SHORT_SHA"
            },
            {
              "name": "CI_COMMIT_MESSAGE",
              "value": "feat: 触发打包\n",
              "valueFrom": {
                "path": "/tmp/CI_COMMIT_MESSAGE"
              },
              "globalName": "CI_COMMIT_MESSAGE"
            }
          ],
          "artifacts": [
            {
              "name": "main-logs",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-clone-2553748563/main.log"
              }
            }
          ],
          "exitCode": "0"
        },
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-258446681",
          "cicd-java-main-finance-b38758a4-hhjbb-4034592005",
          "cicd-java-main-finance-b38758a4-hhjbb-2775002877"
        ],
        "hostNodeName": "k8s03.local.ml"
      },
      "cicd-java-main-finance-b38758a4-hhjbb-2561201363": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-2561201363",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.docker-build(1:app:ml.fawve.springcloud:user:,appname:user,dir:user,jar_path:user/target/user-0.0.2-SNAPSHOT.jar)",
        "displayName": "docker-build(1:app:ml.fawve.springcloud:user:,appname:user,dir:user,jar_path:user/target/user-0.0.2-SNAPSHOT.jar)",
        "type": "Pod",
        "templateName": "container",
        "templateScope": "local/",
        "phase": "Failed",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "message": "workflow shutdown with strategy:  Terminate",
        "startedAt": "2026-01-20T14:32:54Z",
        "finishedAt": "2026-01-20T14:33:17Z",
        "progress": "0/1",
        "inputs": {
          "parameters": [
            {
              "name": "APPNAME",
              "value": "user"
            },
            {
              "name": "CONTEXT_ROOT",
              "value": "user"
            },
            {
              "name": "CI_REGISTRY_URL",
              "value": "https://registry.xxxx.xxxx.xx"
            },
            {
              "name": "REGISTRY_CREDENTIAL_SECRET_NAME",
              "value": "container-registry-credential"
            },
            {
              "name": "CI_COMMIT_SHORT_SHA",
              "value": "b38758a"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "dev"
            },
            {
              "name": "CONTAINER_PLATFORM",
              "value": "linux/amd64"
            },
            {
              "name": "PUSH_RETRY",
              "value": "5"
            }
          ]
        },
        "outputs": {
          "artifacts": [
            {
              "name": "main-logs",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-container-2561201363/main.log"
              }
            }
          ],
          "result": "",
          "exitCode": "143"
        },
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-247794171"
        ],
        "hostNodeName": "k8s03.local.ml"
      },
      "cicd-java-main-finance-b38758a4-hhjbb-258446681": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-258446681",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.change-log",
        "displayName": "change-log",
        "type": "Pod",
        "templateName": "change-log",
        "templateScope": "local/",
        "phase": "Succeeded",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "startedAt": "2026-01-20T14:28:27Z",
        "finishedAt": "2026-01-20T14:28:36Z",
        "progress": "1/1",
        "resourcesDuration": {
          "cpu": 0,
          "memory": 4
        },
        "inputs": {
          "parameters": [
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "0000000000000000000000000000000000000000",
              "description": "上一次成功执行任务的SHA,默认值0000000000000000000000000000000000000000"
            },
            {
              "name": "GIT_CHECKOUT_SHA",
              "value": "b38758a4d38cd25468a9ab11c888a9b4bbc318b2",
              "description": "本次触发任务的 SHA"
            },
            {
              "name": "GIT_PUSH_REF",
              "value": "main"
            }
          ]
        },
        "outputs": {
          "parameters": [
            {
              "name": "CHANGE_LOG",
              "value": "From: Last10..HEAD\n- my-mock-user (6):\n    84b99ce (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    aa95a87 (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    e37f4be (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    ebcb669 (6 months ago) feat: add liquibase-test model.\n    d9e032e (5 months ago) feat: add liquibase-test model.\n    d67ea36 (4 weeks ago) feat: update Dockerfile.dev\n\n- eric (4):\n    eb5992c (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    69d348c (6 months ago) feat: product 增加 druid 配置\n    f434a51 (4 weeks ago) feat: 增加 workflows cicd 的环境映射配置文件\n    b38758a (5 days ago) feat: 触发打包\n",
              "valueFrom": {
                "path": "/tmp/changelog.txt"
              },
              "globalName": "CHANGE_LOG",
              "description": "Git Change Log 内容"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "dev",
              "valueFrom": {
                "path": "/tmp/CI_ENVIRONMENT_NAME.txt"
              },
              "globalName": "CI_ENVIRONMENT_NAME",
              "description": "发布环境名称"
            }
          ],
          "artifacts": [
            {
              "name": "main-logs",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-change-log-258446681/main.log"
              }
            }
          ],
          "exitCode": "0"
        },
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-2775002877"
        ],
        "hostNodeName": "k8s03.local.ml"
      },
      "cicd-java-main-finance-b38758a4-hhjbb-2775002877": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-2775002877",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.notification",
        "displayName": "notification",
        "type": "Pod",
        "templateName": "notification",
        "templateScope": "local/",
        "phase": "Succeeded",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "startedAt": "2026-01-20T14:28:47Z",
        "finishedAt": "2026-01-20T14:29:03Z",
        "progress": "1/1",
        "resourcesDuration": {
          "cpu": 1,
          "memory": 19
        },
        "inputs": {
          "parameters": [
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "0000000000000000000000000000000000000000",
              "description": "上一次成功执行任务的SHA,默认值0000000000000000000000000000000000000000"
            },
            {
              "name": "GIT_CHECKOUT_SHA",
              "value": "b38758a4d38cd25468a9ab11c888a9b4bbc318b2",
              "description": "本次触发任务的 SHA"
            },
            {
              "name": "GIT_REPOSITORY_URL",
              "value": "https://gitlab.xxxx.xxxx.xx/fawve/finance.git"
            },
            {
              "name": "GIT_PUSH_REF",
              "value": "main"
            },
            {
              "name": "GIT_REPOSITORY_NAME",
              "value": "finance"
            },
            {
              "name": "TRIGGER_WORKFLOWS_JOB_AUTHOR",
              "value": "Eric"
            },
            {
              "name": "NOTIFICATION_DINGTALK_BOT_ADDR",
              "value": "http://dingtalk-bot.argo-workflows.svc.cluster.local:8000"
            },
            {
              "name": "PROJECT_ID",
              "value": "7",
              "description": "源码仓库项目的ID"
            },
            {
              "name": "NOTIFICATION_CARD_TEMPLATE_ID",
              "value": "98a61xx31e1-4611-be4e-b1dxxx7225.schema",
              "description": "互动卡片模板ID"
            },
            {
              "name": "NOTIFICATION_OPEN_CONVERSATION_ID",
              "value": "cidUQXUpOwFEbiRNp87JyFE3w==",
              "description": "互动卡片投递群聊ID"
            },
            {
              "name": "CHANGE_LOG",
              "value": "From: Last10..HEAD\n- my-mock-user (6):\n    84b99ce (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    aa95a87 (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    e37f4be (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    ebcb669 (6 months ago) feat: add liquibase-test model.\n    d9e032e (5 months ago) feat: add liquibase-test model.\n    d67ea36 (4 weeks ago) feat: update Dockerfile.dev\n\n- eric (4):\n    eb5992c (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    69d348c (6 months ago) feat: product 增加 druid 配置\n    f434a51 (4 weeks ago) feat: 增加 workflows cicd 的环境映射配置文件\n    b38758a (5 days ago) feat: 触发打包\n",
              "description": "Git Change Log"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "dev",
              "description": "发布环境名称"
            }
          ]
        },
        "outputs": {
          "artifacts": [
            {
              "name": "main-logs",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-notification-2775002877/main.log"
              }
            }
          ],
          "exitCode": "0"
        },
        "hostNodeName": "k8s03.local.ml"
      },
      "cicd-java-main-finance-b38758a4-hhjbb-3342717902": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-3342717902",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.build",
        "displayName": "build",
        "type": "Pod",
        "templateName": "build",
        "templateScope": "local/",
        "phase": "Succeeded",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "startedAt": "2026-01-20T14:31:04Z",
        "finishedAt": "2026-01-20T14:32:23Z",
        "progress": "1/1",
        "resourcesDuration": {
          "cpu": 14,
          "memory": 145
        },
        "inputs": {
          "parameters": [
            {
              "name": "MAVEN_LOCAL_REPO_DIR",
              "value": "/workspace/repository"
            },
            {
              "name": "MAVEN_OPTS",
              "value": "-Dhttps.protocols=TLSv1.2 -Dmaven.repo.local=$(MAVEN_LOCAL_REPO_DIR) -Dorg.slf4j.simpleLogger.showDateTime=true -Djava.awt.headless=true"
            },
            {
              "name": "MAVEN_CLI_OPTS",
              "value": "--batch-mode --errors --fail-at-end --show-version --no-transfer-progress --threads=4 --settings /workspace/settings.xml -DinstallAtEnd=true -DdeployAtEnd=true -Dmaven.test.skip=true -P k8s"
            }
          ],
          "artifacts": [
            {
              "name": "dependencies-list",
              "path": "/workspace/BUILD.txt",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-preflight-4034592005/dependencies-list.tgz"
              }
            }
          ]
        },
        "outputs": {
          "artifacts": [
            {
              "name": "artifacts-list",
              "path": "/workspace/BUILD.txt",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-build-3342717902/artifacts-list.tgz"
              }
            },
            {
              "name": "main-logs",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-build-3342717902/main.log"
              }
            }
          ],
          "exitCode": "0"
        },
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-3369515995"
        ],
        "hostNodeName": "k8s03.local.ml"
      },
      "cicd-java-main-finance-b38758a4-hhjbb-3369515995": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-3369515995",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.result-to-json-list",
        "displayName": "result-to-json-list",
        "type": "Pod",
        "templateName": "result-to-json-list",
        "templateScope": "local/",
        "phase": "Succeeded",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "startedAt": "2026-01-20T14:32:33Z",
        "finishedAt": "2026-01-20T14:32:42Z",
        "progress": "1/1",
        "resourcesDuration": {
          "cpu": 0,
          "memory": 5
        },
        "inputs": {
          "artifacts": [
            {
              "name": "artifacts-list",
              "path": "/workspace/BUILD.txt",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-build-3342717902/artifacts-list.tgz"
              }
            }
          ]
        },
        "outputs": {
          "artifacts": [
            {
              "name": "main-logs",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-result-to-json-list-3369515995/main.log"
              }
            }
          ],
          "result": "[\n  {\n    \"app\": \"ml.fawve.springcloud:eureka-server:\",\n    \"dir\": \"eureka-server\",\n    \"jar_path\": \"eureka-server/target/eureka-server-0.0.2-SNAPSHOT.jar\",\n    \"appname\": \"eureka-server\"\n  },\n  {\n    \"app\": \"ml.fawve.springcloud:user:\",\n    \"dir\": \"user\",\n    \"jar_path\": \"user/target/user-0.0.2-SNAPSHOT.jar\",\n    \"appname\": \"user\"\n  },\n  {\n    \"app\": \"ml.fawve.springcloud:fund:\",\n    \"dir\": \"fund\",\n    \"jar_path\": \"fund/target/fund-0.0.2-SNAPSHOT.jar\",\n    \"appname\": \"fund\"\n  },\n  {\n    \"app\": \"ml.fawve.springcloud:product:\",\n    \"dir\": \"product\",\n    \"jar_path\": \"product/target/product-0.0.2-SNAPSHOT.jar\",\n    \"appname\": \"product\"\n  }\n]",
          "exitCode": "0"
        },
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-3955827291"
        ],
        "hostNodeName": "k8s03.local.ml"
      },
      "cicd-java-main-finance-b38758a4-hhjbb-359253584": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-359253584",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.docker-build(2:app:ml.fawve.springcloud:fund:,appname:fund,dir:fund,jar_path:fund/target/fund-0.0.2-SNAPSHOT.jar)",
        "displayName": "docker-build(2:app:ml.fawve.springcloud:fund:,appname:fund,dir:fund,jar_path:fund/target/fund-0.0.2-SNAPSHOT.jar)",
        "type": "Pod",
        "templateName": "container",
        "templateScope": "local/",
        "phase": "Failed",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "message": "Error (exit code 143)",
        "startedAt": "2026-01-20T14:32:54Z",
        "finishedAt": "2026-01-20T14:33:17Z",
        "progress": "0/1",
        "inputs": {
          "parameters": [
            {
              "name": "APPNAME",
              "value": "fund"
            },
            {
              "name": "CONTEXT_ROOT",
              "value": "fund"
            },
            {
              "name": "CI_REGISTRY_URL",
              "value": "https://registry.xxxx.xxxx.xx"
            },
            {
              "name": "REGISTRY_CREDENTIAL_SECRET_NAME",
              "value": "container-registry-credential"
            },
            {
              "name": "CI_COMMIT_SHORT_SHA",
              "value": "b38758a"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "dev"
            },
            {
              "name": "CONTAINER_PLATFORM",
              "value": "linux/amd64"
            },
            {
              "name": "PUSH_RETRY",
              "value": "5"
            }
          ]
        },
        "outputs": {
          "artifacts": [
            {
              "name": "main-logs",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-container-359253584/main.log"
              }
            }
          ],
          "result": "",
          "exitCode": "143"
        },
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-247794171"
        ],
        "hostNodeName": "k8s02.local.ml"
      },
      "cicd-java-main-finance-b38758a4-hhjbb-3883381747": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-3883381747",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.docker-build(3:app:ml.fawve.springcloud:product:,appname:product,dir:product,jar_path:product/target/product-0.0.2-SNAPSHOT.jar)",
        "displayName": "docker-build(3:app:ml.fawve.springcloud:product:,appname:product,dir:product,jar_path:product/target/product-0.0.2-SNAPSHOT.jar)",
        "type": "Pod",
        "templateName": "container",
        "templateScope": "local/",
        "phase": "Failed",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "message": "Error (exit code 143)",
        "startedAt": "2026-01-20T14:32:54Z",
        "finishedAt": "2026-01-20T14:33:17Z",
        "progress": "0/1",
        "inputs": {
          "parameters": [
            {
              "name": "APPNAME",
              "value": "product"
            },
            {
              "name": "CONTEXT_ROOT",
              "value": "product"
            },
            {
              "name": "CI_REGISTRY_URL",
              "value": "https://registry.xxxx.xxxx.xx"
            },
            {
              "name": "REGISTRY_CREDENTIAL_SECRET_NAME",
              "value": "container-registry-credential"
            },
            {
              "name": "CI_COMMIT_SHORT_SHA",
              "value": "b38758a"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "dev"
            },
            {
              "name": "CONTAINER_PLATFORM",
              "value": "linux/amd64"
            },
            {
              "name": "PUSH_RETRY",
              "value": "5"
            }
          ]
        },
        "outputs": {
          "artifacts": [
            {
              "name": "main-logs",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-container-3883381747/main.log"
              }
            }
          ],
          "result": "",
          "exitCode": "143"
        },
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-247794171"
        ],
        "hostNodeName": "k8s02.local.ml"
      },
      "cicd-java-main-finance-b38758a4-hhjbb-3955827291": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-3955827291",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.docker-build",
        "displayName": "docker-build",
        "type": "TaskGroup",
        "templateName": "container",
        "templateScope": "local/",
        "phase": "Failed",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "startedAt": "2026-01-20T14:32:53Z",
        "finishedAt": "2026-01-20T14:33:17Z",
        "progress": "0/4",
        "nodeFlag": {},
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-2449782576",
          "cicd-java-main-finance-b38758a4-hhjbb-2561201363",
          "cicd-java-main-finance-b38758a4-hhjbb-359253584",
          "cicd-java-main-finance-b38758a4-hhjbb-3883381747"
        ]
      },
      "cicd-java-main-finance-b38758a4-hhjbb-4034592005": {
        "id": "cicd-java-main-finance-b38758a4-hhjbb-4034592005",
        "name": "cicd-java-main-finance-b38758a4-hhjbb.preflight",
        "displayName": "preflight",
        "type": "Pod",
        "templateName": "preflight",
        "templateScope": "local/",
        "phase": "Succeeded",
        "boundaryID": "cicd-java-main-finance-b38758a4-hhjbb",
        "startedAt": "2026-01-20T14:28:27Z",
        "finishedAt": "2026-01-20T14:30:54Z",
        "progress": "1/1",
        "resourcesDuration": {
          "cpu": 27,
          "memory": 279
        },
        "inputs": {
          "parameters": [
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "0000000000000000000000000000000000000000",
              "description": "上一次成功执行任务的SHA,默认值0000000000000000000000000000000000000000"
            },
            {
              "name": "GIT_PUSH_REF",
              "value": "main"
            },
            {
              "name": "GIT_CHECKOUT_SHA",
              "value": "b38758a4d38cd25468a9ab11c888a9b4bbc318b2"
            },
            {
              "name": "GIT_BEFORE_SHA",
              "value": "d67ea3643e87d813cbd8ff069a3d1e2710cacf57"
            },
            {
              "name": "PROJECT_DEPENDENCY_INCLUDE_GROUP_NAME",
              "value": ""
            },
            {
              "name": "MAVEN_LOCAL_REPO_DIR",
              "value": "/workspace/repository"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "main"
            },
            {
              "name": "MAVEN_OPTS",
              "value": "-Dhttps.protocols=TLSv1.2 -Dmaven.repo.local=$(MAVEN_LOCAL_REPO_DIR) -Dorg.slf4j.simpleLogger.showDateTime=false -Djava.awt.headless=true"
            },
            {
              "name": "MAVEN_CLI_OPTS",
              "value": "--batch-mode --no-transfer-progress --threads=1 --settings /workspace/settings.xml -Dmaven.test.skip=true -P k8s --fail-at-end -X"
            },
            {
              "name": "_MANUAL_",
              "value": "false"
            }
          ]
        },
        "outputs": {
          "parameters": [
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "dev",
              "valueFrom": {
                "path": "/tmp/CI_ENVIRONMENT_NAME"
              },
              "globalName": "CI_ENVIRONMENT_NAME"
            }
          ],
          "artifacts": [
            {
              "name": "dependencies-list",
              "path": "/workspace/BUILD.txt",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-preflight-4034592005/dependencies-list.tgz"
              }
            },
            {
              "name": "main-logs",
              "s3": {
                "key": "cicd-java-main-finance-b38758a4-hhjbb/cicd-java-main-finance-b38758a4-hhjbb-preflight-4034592005/main.log"
              }
            }
          ],
          "exitCode": "0"
        },
        "children": [
          "cicd-java-main-finance-b38758a4-hhjbb-3342717902"
        ],
        "hostNodeName": "k8s03.local.ml"
      }
    },
    "storedTemplates": {
      "namespaced/ci-java-jagat/build": {
        "name": "build",
        "inputs": {
          "parameters": [
            {
              "name": "MAVEN_LOCAL_REPO_DIR",
              "value": "/workspace/repository"
            },
            {
              "name": "MAVEN_OPTS",
              "value": "-Dhttps.protocols=TLSv1.2 -Dmaven.repo.local=$(MAVEN_LOCAL_REPO_DIR) -Dorg.slf4j.simpleLogger.showDateTime=true -Djava.awt.headless=true"
            },
            {
              "name": "MAVEN_CLI_OPTS",
              "value": "--batch-mode --errors --fail-at-end --show-version --no-transfer-progress --threads=4 --settings /workspace/settings.xml -DinstallAtEnd=true -DdeployAtEnd=true -Dmaven.test.skip=true -P k8s"
            }
          ],
          "artifacts": [
            {
              "name": "dependencies-list",
              "path": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
            }
          ]
        },
        "outputs": {
          "artifacts": [
            {
              "name": "artifacts-list",
              "path": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
            }
          ]
        },
        "metadata": {},
        "script": {
          "name": "maven-build",
          "image": "fcr.xxxx.xxxx.xx/maven:3.9-eclipse-tumurin-17",
          "command": [
            "bash",
            "-e"
          ],
          "workingDir": "/workspace",
          "env": [
            {
              "name": "_MANUAL_",
              "value": "{{workflow.parameters._MANUAL_}}"
            },
            {
              "name": "MAVEN_LOCAL_REPO_DIR",
              "value": "{{inputs.parameters.MAVEN_LOCAL_REPO_DIR}}"
            },
            {
              "name": "MAVEN_BUILD_PROJECT_DIR_FILE",
              "value": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
            },
            {
              "name": "MAVEN_OPTS",
              "value": "{{inputs.parameters.MAVEN_OPTS}}"
            },
            {
              "name": "MAVEN_CLI_OPTS",
              "value": "{{inputs.parameters.MAVEN_CLI_OPTS}}"
            },
            {
              "name": "CI_DEBUG_TRACE",
              "value": "{{workflow.parameters.CI_DEBUG_TRACE}}"
            }
          ],
          "resources": {},
          "volumeMounts": [
            {
              "name": "workspace",
              "mountPath": "/workspace"
            },
            {
              "name": "maven-settings",
              "mountPath": "/workspace/settings.xml",
              "subPath": "settings.xml"
            },
            {
              "name": "maven-repository-cache",
              "mountPath": "/workspace/repository"
            }
          ],
          "source": "# Debug Mode\nif [[ ${CI_DEBUG_TRACE} == true ]]; xxxx"
        }
      },
      "namespaced/ci-java-jagat/change-log": {
        "name": "change-log",
        "inputs": {
          "parameters": [
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "0000000000000000000000000000000000000000",
              "description": "上一次成功执行任务的SHA,默认值0000000000000000000000000000000000000000"
            },
            {
              "name": "GIT_CHECKOUT_SHA",
              "description": "本次触发任务的 SHA"
            },
            {
              "name": "GIT_PUSH_REF"
            }
          ]
        },
        "outputs": {
          "parameters": [
            {
              "name": "CHANGE_LOG",
              "valueFrom": {
                "path": "/tmp/changelog.txt"
              },
              "globalName": "CHANGE_LOG",
              "description": "Git Change Log 内容"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "valueFrom": {
                "path": "/tmp/CI_ENVIRONMENT_NAME.txt"
              },
              "globalName": "CI_ENVIRONMENT_NAME",
              "description": "发布环境名称"
            }
          ]
        },
        "metadata": {},
        "container": {
          "name": "commit-logs",
          "image": "fcr.xxxx.xxxx.xx/bitnami/git@sha256:c01f7167dcd8d680a5bef264cc8213e1648e247ec739d6b15ee98ef5a1b0a467",
          "command": [
            "bash",
            "-ec"
          ],
          "args": [
            "set -x\n## 开始处理分支与环境的对应关xxxxx"
          ],
          "workingDir": "/workspace",
          "env": [
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "{{inputs.parameters.PREVIOUS_CHECKOUT_SHA}}"
            },
            {
              "name": "GIT_CHECKOUT_SHA",
              "value": "{{inputs.parameters.GIT_CHECKOUT_SHA}}"
            },
            {
              "name": "GIT_PUSH_REF",
              "value": "{{inputs.parameters.GIT_PUSH_REF}}"
            }
          ],
          "resources": {},
          "volumeMounts": [
            {
              "name": "workspace",
              "mountPath": "/workspace"
            }
          ]
        }
      },
      "namespaced/ci-java-jagat/clone": {
        "name": "clone",
        "inputs": {
          "parameters": [
            {
              "name": "WORKFLOWS_API_DOMAIN"
            },
            {
              "name": "WORKFLOWS_API_NAMESPACE"
            },
            {
              "name": "WORKFLOWS_API_PROJECT_ID"
            },
            {
              "name": "WORKFLOWS_API_REPOSITORY"
            },
            {
              "name": "WORKFLOWS_API_BRANCH"
            },
            {
              "name": "GIT_REPOSITORY_URL"
            },
            {
              "name": "GIT_PUSH_REF",
              "value": "main"
            },
            {
              "name": "TRIGGER_ACCOUNT",
              "value": "user-01"
            },
            {
              "name": "GIT_CHECKOUT_SHA"
            },
            {
              "name": "GIT_REPOSITORY_NAME"
            },
            {
              "name": "OBJECT_KIND",
              "value": "push"
            },
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "/tmp/git/PREVIOUS_CHECKOUT_SHA"
            }
          ]
        },
        "outputs": {
          "parameters": [
            {
              "name": "CI_COMMIT_SHORT_SHA",
              "valueFrom": {
                "path": "/tmp/CI_COMMIT_SHORT_SHA"
              },
              "globalName": "CI_COMMIT_SHORT_SHA"
            },
            {
              "name": "CI_COMMIT_MESSAGE",
              "valueFrom": {
                "path": "/tmp/CI_COMMIT_MESSAGE"
              },
              "globalName": "CI_COMMIT_MESSAGE"
            }
          ]
        },
        "metadata": {},
        "container": {
          "name": "git",
          "image": "fcr.xxxx.xxxx.xx/bitnami/git@sha256:c01f7167dcd8d680a5bef264cc8213e1648e247ec739d6b15ee98ef5a1b0a467",
          "command": [
            "bash",
            "-euc"
          ],
          "args": [
            "## Login settings\ncase xxxxx"
          ],
          "workingDir": "/workspace",
          "env": [
            {
              "name": "GIT_REPOSITORY_URL",
              "value": "{{inputs.parameters.GIT_REPOSITORY_URL}}"
            },
            {
              "name": "GIT_PUSH_REF",
              "value": "{{inputs.parameters.GIT_PUSH_REF}}"
            },
            {
              "name": "GIT_USER",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "git-repository-credential",
                  "key": "GIT_USER"
                }
              }
            },
            {
              "name": "GIT_pawwwword",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "git-repository-credential",
                  "key": "GIT_pawwwword"
                }
              }
            },
            {
              "name": "GIT_CREDENTIAL_TYPE",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "git-repository-credential",
                  "key": "GIT_CREDENTIAL_TYPE"
                }
              }
            },
            {
              "name": "GIT_SSH_PRIVATEKEY",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "git-repository-credential",
                  "key": "GIT_SSH_PRIVATEKEY",
                  "optional": true
                }
              }
            }
          ],
          "resources": {},
          "volumeMounts": [
            {
              "name": "workspace",
              "mountPath": "/workspace"
            }
          ]
        }
      },
      "namespaced/ci-java-jagat/container": {
        "name": "container",
        "inputs": {
          "parameters": [
            {
              "name": "APPNAME"
            },
            {
              "name": "CONTEXT_ROOT"
            },
            {
              "name": "CI_REGISTRY_URL"
            },
            {
              "name": "REGISTRY_CREDENTIAL_SECRET_NAME"
            },
            {
              "name": "CI_COMMIT_SHORT_SHA"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "{{workflow.outputs.parameters.CI_ENVIRONMENT_NAME}}"
            },
            {
              "name": "CONTAINER_PLATFORM"
            },
            {
              "name": "PUSH_RETRY",
              "value": "5"
            }
          ]
        },
        "outputs": {},
        "metadata": {},
        "container": {
          "name": "podman",
          "image": "quay.io/podman/stable:v5",
          "command": [
            "bash",
            "-ec"
          ],
          "args": [
            "## 这个任务的 stdout 必须为一个有效 JSON 序列，xxxxx"
          ],
          "workingDir": "/workspace",
          "env": [
            {
              "name": "APPNAME",
              "value": "{{inputs.parameters.APPNAME}}"
            },
            {
              "name": "CONTEXT_ROOT",
              "value": "{{inputs.parameters.CONTEXT_ROOT}}"
            },
            {
              "name": "CI_REGISTRY_URL",
              "value": "{{inputs.parameters.CI_REGISTRY_URL}}"
            },
            {
              "name": "CI_COMMIT_SHORT_SHA",
              "value": "{{inputs.parameters.CI_COMMIT_SHORT_SHA}}"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "{{inputs.parameters.CI_ENVIRONMENT_NAME}}"
            },
            {
              "name": "CONTAINER_PLATFORM",
              "value": "{{inputs.parameters.CONTAINER_PLATFORM}}"
            },
            {
              "name": "PUSH_RETRY",
              "value": "{{inputs.parameters.PUSH_RETRY}}"
            },
            {
              "name": "REGISTRY_USER",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "{{inputs.parameters.REGISTRY_CREDENTIAL_SECRET_NAME}}",
                  "key": "REGISTRY_USER"
                }
              }
            },
            {
              "name": "REGISTRY_pawwwword",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "{{inputs.parameters.REGISTRY_CREDENTIAL_SECRET_NAME}}",
                  "key": "REGISTRY_pawwwword"
                }
              }
            }
          ],
          "resources": {
            "limits": {
              "cpu": "4",
              "memory": "1500Mi"
            },
            "requests": {
              "cpu": "500m",
              "memory": "800Mi"
            }
          },
          "volumeMounts": [
            {
              "name": "workspace",
              "mountPath": "/workspace"
            },
            {
              "name": "config-json",
              "mountPath": "/run/containers/0/"
            }
          ],
          "securityContext": {
            "privileged": true
          }
        },
        "volumes": [
          {
            "name": "config-json",
            "emptyDir": {}
          }
        ],
        "initContainers": [
          {
            "name": "registry-login",
            "image": "docker:cli",
            "command": [
              "sh",
              "-ec"
            ],
            "args": [
              "docker login --username ${REGISTRY_USER} xxxxx"
            ],
            "env": [
              {
                "name": "REGISTRY_USER",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "{{inputs.parameters.REGISTRY_CREDENTIAL_SECRET_NAME}}",
                    "key": "REGISTRY_USER"
                  }
                }
              },
              {
                "name": "REGISTRY_pawwwword",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "{{inputs.parameters.REGISTRY_CREDENTIAL_SECRET_NAME}}",
                    "key": "REGISTRY_pawwwword"
                  }
                }
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "config-json",
                "mountPath": "/run/containers/0/"
              }
            ]
          }
        ]
      },
      "namespaced/ci-java-jagat/get-previous-successful-commit-sha": {
        "name": "get-previous-successful-commit-sha",
        "inputs": {
          "parameters": [
            {
              "name": "WORKFLOWS_API_DOMAIN"
            },
            {
              "name": "WORKFLOWS_API_NAMESPACE"
            },
            {
              "name": "WORKFLOWS_API_PROJECT_ID"
            },
            {
              "name": "WORKFLOWS_API_REPOSITORY"
            },
            {
              "name": "WORKFLOWS_API_BRANCH"
            },
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "/tmp/PREVIOUS_CHECKOUT_SHA"
            },
            {
              "name": "CURRENT_GIT_CHECKOUT_SHA",
              "description": "本次任务的 Commit SHA 值，用于判断是否重复执行任务"
            }
          ]
        },
        "outputs": {
          "parameters": [
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "valueFrom": {
                "path": "/tmp/PREVIOUS_CHECKOUT_SHA"
              },
              "globalName": "PREVIOUS_CHECKOUT_SHA"
            }
          ]
        },
        "metadata": {},
        "container": {
          "name": "workflow-previous-commit-sha",
          "image": "my-mock-user/git-yq:2.44",
          "command": [
            "bash",
            "-c"
          ],
          "args": [
            "echo \"INFO: Starting get last previous checkout sha by API xxxxx"
          ],
          "workingDir": "/workspace",
          "env": [
            {
              "name": "ANNOTATION_CHECKOUT_SHA_NAME",
              "value": "trigger.workflows.job/CHECKOUT_SHA"
            }
          ],
          "resources": {},
          "volumeMounts": [
            {
              "name": "argo-workflows-operator-token",
              "mountPath": "/var/run/kubernetes/argo-workflows-token",
              "subPath": "token"
            }
          ]
        },
        "metrics": {
          "prometheus": [
            {
              "name": "ci_result_task_counter",
              "labels": [
                {
                  "key": "stage",
                  "value": "clone"
                },
                {
                  "key": "branch",
                  "value": "{{ workflow.parameters.GIT_PUSH_REF }}"
                },
                {
                  "key": "status",
                  "value": "{{ status }}"
                }
              ],
              "help": "Count of task execution by result status - task level",
              "counter": {
                "value": "1"
              }
            }
          ]
        }
      },
      "namespaced/ci-java-jagat/main": {
        "name": "main",
        "inputs": {},
        "outputs": {},
        "metadata": {},
        "dag": {
          "tasks": [
            {
              "name": "clone",
              "template": "clone",
              "arguments": {
                "parameters": [
                  {
                    "name": "WORKFLOWS_API_DOMAIN",
                    "value": "{{workflow.parameters.WORKFLOWS_API_DOMAIN}}"
                  },
                  {
                    "name": "WORKFLOWS_API_NAMESPACE",
                    "value": "{{workflow.parameters.WORKFLOWS_API_NAMESPACE}}"
                  },
                  {
                    "name": "WORKFLOWS_API_PROJECT_ID",
                    "value": "{{workflow.parameters.WORKFLOWS_API_PROJECT_ID}}"
                  },
                  {
                    "name": "WORKFLOWS_API_REPOSITORY",
                    "value": "{{workflow.parameters.WORKFLOWS_API_REPOSITORY}}"
                  },
                  {
                    "name": "WORKFLOWS_API_BRANCH",
                    "value": "{{workflow.parameters.WORKFLOWS_API_BRANCH}}"
                  },
                  {
                    "name": "GIT_REPOSITORY_URL",
                    "value": "{{workflow.parameters.GIT_REPOSITORY_URL}}"
                  },
                  {
                    "name": "GIT_PUSH_REF",
                    "value": "{{workflow.parameters.GIT_PUSH_REF}}"
                  },
                  {
                    "name": "GIT_CHECKOUT_SHA",
                    "value": "{{workflow.parameters.GIT_CHECKOUT_SHA}}"
                  },
                  {
                    "name": "GIT_REPOSITORY_NAME",
                    "value": "{{workflow.parameters.GIT_REPOSITORY_NAME}}"
                  }
                ]
              }
            },
            {
              "name": "previous-commit-sha",
              "template": "get-previous-successful-commit-sha",
              "arguments": {
                "parameters": [
                  {
                    "name": "WORKFLOWS_API_DOMAIN",
                    "value": "{{workflow.parameters.WORKFLOWS_API_DOMAIN}}"
                  },
                  {
                    "name": "WORKFLOWS_API_NAMESPACE",
                    "value": "{{workflow.parameters.WORKFLOWS_API_NAMESPACE}}"
                  },
                  {
                    "name": "WORKFLOWS_API_PROJECT_ID",
                    "value": "{{workflow.parameters.WORKFLOWS_API_PROJECT_ID}}"
                  },
                  {
                    "name": "WORKFLOWS_API_REPOSITORY",
                    "value": "{{workflow.parameters.WORKFLOWS_API_REPOSITORY}}"
                  },
                  {
                    "name": "WORKFLOWS_API_BRANCH",
                    "value": "{{workflow.parameters.WORKFLOWS_API_BRANCH}}"
                  },
                  {
                    "name": "CURRENT_GIT_CHECKOUT_SHA",
                    "value": "{{workflow.parameters.GIT_CHECKOUT_SHA}}",
                    "description": "本次CI的commit SHA值"
                  }
                ]
              }
            },
            {
              "name": "change-log",
              "template": "change-log",
              "arguments": {
                "parameters": [
                  {
                    "name": "PREVIOUS_CHECKOUT_SHA",
                    "value": "{{workflow.outputs.parameters.PREVIOUS_CHECKOUT_SHA}}"
                  },
                  {
                    "name": "GIT_CHECKOUT_SHA",
                    "value": "{{workflow.parameters.GIT_CHECKOUT_SHA}}"
                  },
                  {
                    "name": "GIT_PUSH_REF",
                    "value": "{{workflow.parameters.GIT_PUSH_REF}}"
                  }
                ]
              },
              "depends": "clone.Succeeded && previous-commit-sha.Succeeded"
            },
            {
              "name": "notification",
              "template": "notification",
              "arguments": {
                "parameters": [
                  {
                    "name": "PREVIOUS_CHECKOUT_SHA",
                    "value": "{{workflow.outputs.parameters.PREVIOUS_CHECKOUT_SHA}}"
                  },
                  {
                    "name": "GIT_REPOSITORY_URL",
                    "value": "{{workflow.parameters.GIT_REPOSITORY_URL}}"
                  },
                  {
                    "name": "GIT_PUSH_REF",
                    "value": "{{workflow.parameters.GIT_PUSH_REF}}"
                  },
                  {
                    "name": "GIT_REPOSITORY_NAME",
                    "value": "{{workflow.parameters.GIT_REPOSITORY_NAME}}"
                  },
                  {
                    "name": "TRIGGER_WORKFLOWS_JOB_AUTHOR",
                    "value": "{{workflow.parameters.TRIGGER_WORKFLOWS_JOB_AUTHOR}}"
                  },
                  {
                    "name": "GIT_CHECKOUT_SHA",
                    "value": "{{workflow.parameters.GIT_CHECKOUT_SHA}}"
                  },
                  {
                    "name": "PROJECT_ID",
                    "value": "{{workflow.parameters.WORKFLOWS_API_PROJECT_ID}}"
                  },
                  {
                    "name": "NOTIFICATION_CARD_TEMPLATE_ID",
                    "value": "{{workflow.parameters.NOTIFICATION_CARD_TEMPLATE_ID}}"
                  },
                  {
                    "name": "NOTIFICATION_OPEN_CONVERSATION_ID",
                    "value": "{{workflow.parameters.NOTIFICATION_OPEN_CONVERSATION_ID}}"
                  },
                  {
                    "name": "NOTIFICATION_DINGTALK_BOT_ADDR",
                    "value": "{{workflow.parameters.NOTIFICATION_DINGTALK_BOT_ADDR}}"
                  },
                  {
                    "name": "CHANGE_LOG",
                    "value": "{{tasks.change-log.outputs.parameters.CHANGE_LOG}}"
                  },
                  {
                    "name": "CI_ENVIRONMENT_NAME",
                    "value": "{{tasks.change-log.outputs.parameters.CI_ENVIRONMENT_NAME}}"
                  }
                ]
              },
              "depends": "clone.Succeeded && change-log.Succeeded"
            },
            {
              "name": "preflight",
              "template": "preflight",
              "arguments": {
                "parameters": [
                  {
                    "name": "GIT_PUSH_REF",
                    "value": "{{workflow.parameters.GIT_PUSH_REF}}"
                  },
                  {
                    "name": "GIT_CHECKOUT_SHA",
                    "value": "{{workflow.parameters.GIT_CHECKOUT_SHA}}"
                  },
                  {
                    "name": "PROJECT_DEPENDENCY_INCLUDE_GROUP_NAME",
                    "value": "{{workflow.parameters.PROJECT_DEPENDENCY_INCLUDE_GROUP_NAME}}"
                  },
                  {
                    "name": "GIT_BEFORE_SHA",
                    "value": "{{workflow.parameters.GIT_BEFORE_SHA}}"
                  },
                  {
                    "name": "PREVIOUS_CHECKOUT_SHA",
                    "value": "{{workflow.outputs.parameters.PREVIOUS_CHECKOUT_SHA}}"
                  },
                  {
                    "name": "_MANUAL_",
                    "value": "{{workflow.parameters._MANUAL_}}"
                  }
                ]
              },
              "depends": "clone"
            },
            {
              "name": "build",
              "template": "build",
              "arguments": {
                "artifacts": [
                  {
                    "name": "dependencies-list",
                    "from": "{{tasks.preflight.outputs.artifacts.dependencies-list}}"
                  }
                ]
              },
              "depends": "preflight"
            },
            {
              "name": "result-to-json-list",
              "template": "result-to-json-list",
              "arguments": {
                "artifacts": [
                  {
                    "name": "artifacts-list",
                    "from": "{{tasks.build.outputs.artifacts.artifacts-list}}"
                  }
                ]
              },
              "depends": "build"
            },
            {
              "name": "docker-build",
              "template": "container",
              "arguments": {
                "parameters": [
                  {
                    "name": "APPNAME",
                    "value": "{{item.appname}}"
                  },
                  {
                    "name": "CONTEXT_ROOT",
                    "value": "{{item.dir}}"
                  },
                  {
                    "name": "CI_REGISTRY_URL",
                    "value": "{{workflow.parameters.CI_REGISTRY_URL}}"
                  },
                  {
                    "name": "REGISTRY_CREDENTIAL_SECRET_NAME",
                    "value": "{{workflow.parameters.REGISTRY_CREDENTIAL_SECRET_NAME}}"
                  },
                  {
                    "name": "CI_COMMIT_SHORT_SHA",
                    "value": "{{workflow.outputs.parameters.CI_COMMIT_SHORT_SHA}}"
                  },
                  {
                    "name": "CONTAINER_PLATFORM",
                    "value": "linux/amd64"
                  }
                ]
              },
              "withParam": "{{tasks.result-to-json-list.outputs.result}}",
              "depends": "result-to-json-list.Succeeded"
            },
            {
              "name": "sync-deploy",
              "template": "sync-deploy",
              "arguments": {
                "parameters": [
                  {
                    "name": "GIT_DEPLOY_REPOSITORY_URL",
                    "value": "{{workflow.parameters.GIT_DEPLOY_REPOSITORY_URL}}"
                  },
                  {
                    "name": "aggregate-results",
                    "value": "{{tasks.docker-build.outputs.result}}"
                  },
                  {
                    "name": "GIT_DEPLOY_BRANCH_NAME",
                    "value": "{{workflow.parameters.GIT_DEPLOY_BRANCH_NAME}}"
                  }
                ]
              },
              "depends": "docker-build.Succeeded"
            }
          ]
        }
      },
      "namespaced/ci-java-jagat/notification": {
        "name": "notification",
        "inputs": {
          "parameters": [
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "0000000000000000000000000000000000000000",
              "description": "上一次成功执行任务的SHA,默认值0000000000000000000000000000000000000000"
            },
            {
              "name": "GIT_CHECKOUT_SHA",
              "description": "本次触发任务的 SHA"
            },
            {
              "name": "GIT_REPOSITORY_URL"
            },
            {
              "name": "GIT_PUSH_REF"
            },
            {
              "name": "GIT_REPOSITORY_NAME"
            },
            {
              "name": "TRIGGER_WORKFLOWS_JOB_AUTHOR"
            },
            {
              "name": "NOTIFICATION_DINGTALK_BOT_ADDR",
              "value": "http://dingtalk-bot.workflows.svc:8000"
            },
            {
              "name": "PROJECT_ID",
              "description": "源码仓库项目的ID"
            },
            {
              "name": "NOTIFICATION_CARD_TEMPLATE_ID",
              "description": "互动卡片模板ID"
            },
            {
              "name": "NOTIFICATION_OPEN_CONVERSATION_ID",
              "description": "互动卡片投递群聊ID"
            },
            {
              "name": "CHANGE_LOG",
              "description": "Git Change Log"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "description": "发布环境名称"
            }
          ]
        },
        "outputs": {},
        "metadata": {},
        "container": {
          "name": "commit-logs",
          "image": "fcr.xxxx.xxxx.xx/bitnami/git@sha256:c01f7167dcd8d680a5bef264cc8213e1648e247ec739d6b15ee98ef5a1b0a467",
          "command": [
            "bash",
            "-ec"
          ],
          "args": [
            "set -x\nfunction post_notification()xxxxx"
          ],
          "workingDir": "/workspace",
          "env": [
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "{{inputs.parameters.PREVIOUS_CHECKOUT_SHA}}"
            },
            {
              "name": "TRIGGER_WORKFLOWS_JOB_AUTHOR",
              "value": "{{inputs.parameters.TRIGGER_WORKFLOWS_JOB_AUTHOR}}"
            },
            {
              "name": "GIT_CHECKOUT_SHA",
              "value": "{{inputs.parameters.GIT_CHECKOUT_SHA}}"
            },
            {
              "name": "GIT_PUSH_REF",
              "value": "{{inputs.parameters.GIT_PUSH_REF}}"
            },
            {
              "name": "NOTIFICATION_CARD_TEMPLATE_ID",
              "value": "{{inputs.parameters.NOTIFICATION_CARD_TEMPLATE_ID}}"
            },
            {
              "name": "NOTIFICATION_OPEN_CONVERSATION_ID",
              "value": "{{inputs.parameters.NOTIFICATION_OPEN_CONVERSATION_ID}}"
            }
          ],
          "resources": {},
          "volumeMounts": [
            {
              "name": "workspace",
              "mountPath": "/workspace"
            }
          ]
        }
      },
      "namespaced/ci-java-jagat/preflight": {
        "name": "preflight",
        "inputs": {
          "parameters": [
            {
              "name": "PREVIOUS_CHECKOUT_SHA",
              "value": "0000000000000000000000000000000000000000",
              "description": "上一次成功执行任务的SHA,默认值0000000000000000000000000000000000000000"
            },
            {
              "name": "GIT_PUSH_REF"
            },
            {
              "name": "GIT_CHECKOUT_SHA"
            },
            {
              "name": "GIT_BEFORE_SHA"
            },
            {
              "name": "PROJECT_DEPENDENCY_INCLUDE_GROUP_NAME",
              "value": "{{workflow.parameters.PROJECT_DEPENDENCY_INCLUDE_GROUP_NAME}}"
            },
            {
              "name": "MAVEN_LOCAL_REPO_DIR",
              "value": "/workspace/repository"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "{{workflow.parameters.CI_ENVIRONMENT_NAME}}"
            },
            {
              "name": "MAVEN_OPTS",
              "value": "-Dhttps.protocols=TLSv1.2 -Dmaven.repo.local=$(MAVEN_LOCAL_REPO_DIR) -Dorg.slf4j.simpleLogger.showDateTime=false -Djava.awt.headless=true"
            },
            {
              "name": "MAVEN_CLI_OPTS",
              "value": "--batch-mode --no-transfer-progress --threads=1 --settings /workspace/settings.xml -Dmaven.test.skip=true -P k8s --fail-at-end -X"
            },
            {
              "name": "_MANUAL_",
              "value": "false"
            }
          ]
        },
        "outputs": {
          "parameters": [
            {
              "name": "CI_ENVIRONMENT_NAME",
              "valueFrom": {
                "path": "/tmp/CI_ENVIRONMENT_NAME"
              },
              "globalName": "CI_ENVIRONMENT_NAME"
            }
          ],
          "artifacts": [
            {
              "name": "dependencies-list",
              "path": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
            }
          ]
        },
        "metadata": {},
        "container": {
          "name": "",
          "image": "fcr.xxxx.xxxx.xx/maven:3.9-eclipse-tumurin-17",
          "command": [
            "bash",
            "-c"
          ],
          "args": [
            "# 日志函数\nlog_info() {xxxxxxxx"
          ],
          "workingDir": "/workspace",
          "env": [
            {
              "name": "GIT_PUSH_REF",
              "value": "{{inputs.parameters.GIT_PUSH_REF}}"
            },
            {
              "name": "GIT_CHECKOUT_SHA",
              "value": "{{inputs.parameters.GIT_CHECKOUT_SHA}}"
            },
            {
              "name": "MAVEN_LOCAL_REPO_DIR",
              "value": "{{inputs.parameters.MAVEN_LOCAL_REPO_DIR}}"
            },
            {
              "name": "MAVEN_OPTS",
              "value": "{{inputs.parameters.MAVEN_OPTS}}"
            },
            {
              "name": "MAVEN_CLI_OPTS",
              "value": "{{inputs.parameters.MAVEN_CLI_OPTS}}"
            },
            {
              "name": "MAVEN_BUILD_PROJECT_DIR_FILE",
              "value": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
            },
            {
              "name": "PROJECT_DEPENDENCY_TREE_FILE",
              "value": "dependencies.txt"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "{{inputs.parameters.CI_ENVIRONMENT_NAME}}"
            },
            {
              "name": "CI_DEBUG_TRACE",
              "value": "{{workflow.parameters.CI_DEBUG_TRACE}}"
            },
            {
              "name": "MVN_LOG_FILE",
              "value": "mvn.log"
            },
            {
              "name": "_MANUAL_",
              "value": "{{inputs.parameters._MANUAL_}}"
            }
          ],
          "resources": {},
          "volumeMounts": [
            {
              "name": "workspace",
              "mountPath": "/workspace"
            },
            {
              "name": "maven-settings",
              "mountPath": "/workspace/settings.xml",
              "subPath": "settings.xml"
            },
            {
              "name": "maven-repository-cache",
              "mountPath": "/workspace/repository"
            }
          ]
        }
      },
      "namespaced/ci-java-jagat/result-to-json-list": {
        "name": "result-to-json-list",
        "inputs": {
          "artifacts": [
            {
              "name": "artifacts-list",
              "path": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
            }
          ]
        },
        "outputs": {},
        "metadata": {},
        "script": {
          "name": "regular-to-json",
          "image": "my-mock-user/git-yq:2.42",
          "command": [
            "bash",
            "-e"
          ],
          "env": [
            {
              "name": "MAVEN_BUILD_PROJECT_DIR_FILE",
              "value": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
            }
          ],
          "resources": {},
          "source": "cat ${MAVEN_BUILD_PROJECT_DIR_FILE} | jq -MRn '[inputs]|map(split(\" \") | {\"app\":.[0],\"dir\":.[1],\"jar_path\":.[2],\"appname\":.[3]})'\n"
        }
      },
      "namespaced/ci-java-jagat/sync-deploy": {
        "name": "sync-deploy",
        "inputs": {
          "parameters": [
            {
              "name": "GIT_DEPLOY_REPOSITORY_URL"
            },
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "{{workflow.outputs.parameters.CI_COMMIT_SHORT_SHA}}"
            },
            {
              "name": "GIT_REPOSITORY_URL",
              "value": "{{workflow.parameters.GIT_REPOSITORY_URL}}"
            },
            {
              "name": "GIT_DEPLOY_BRANCH_NAME",
              "value": "main"
            },
            {
              "name": "aggregate-results"
            }
          ]
        },
        "outputs": {},
        "metadata": {},
        "script": {
          "name": "git-yq",
          "image": "my-mock-user/git-yq:2.44",
          "command": [
            "bash",
            "-e"
          ],
          "workingDir": "/workspace",
          "env": [
            {
              "name": "CI_ENVIRONMENT_NAME",
              "value": "{{inputs.parameters.CI_ENVIRONMENT_NAME}}"
            },
            {
              "name": "GIT_USER",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "git-deploy-repository-credential",
                  "key": "GIT_USER"
                }
              }
            },
            {
              "name": "GIT_pawwwword",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "git-deploy-repository-credential",
                  "key": "GIT_pawwwword"
                }
              }
            },
            {
              "name": "GIT_CREDENTIAL_TYPE",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "git-deploy-repository-credential",
                  "key": "GIT_CREDENTIAL_TYPE"
                }
              }
            },
            {
              "name": "GIT_SSH_PRIVATEKEY",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "git-deploy-repository-credential",
                  "key": "GIT_SSH_PRIVATEKEY",
                  "optional": true
                }
              }
            }
          ],
          "resources": {},
          "volumeMounts": [
            {
              "name": "workspace",
              "mountPath": "/workspace"
            }
          ],
          "source": "## Login settings\ncase xxxxx"
        }
      }
    },
    "persistentVolumeClaims": [
      {
        "name": "workspace",
        "persistentVolumeClaim": {
          "claimName": "cicd-java-main-finance-b38758a4-hhjbb-workspace"
        }
      }
    ],
    "outputs": {
      "parameters": [
        {
          "name": "PREVIOUS_CHECKOUT_SHA",
          "value": "0000000000000000000000000000000000000000"
        },
        {
          "name": "CI_COMMIT_SHORT_SHA",
          "value": "b38758a"
        },
        {
          "name": "CI_COMMIT_MESSAGE",
          "value": "feat: 触发打包\n"
        },
        {
          "name": "CHANGE_LOG",
          "value": "From: Last10..HEAD\n- my-mock-user (6):\n    84b99ce (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    aa95a87 (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    e37f4be (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    ebcb669 (6 months ago) feat: add liquibase-test model.\n    d9e032e (5 months ago) feat: add liquibase-test model.\n    d67ea36 (4 weeks ago) feat: update Dockerfile.dev\n\n- eric (4):\n    eb5992c (1 year, 1 month ago) dev: product 增加方法调用，测试调用链, 增加 addEvent 方法\n    69d348c (6 months ago) feat: product 增加 druid 配置\n    f434a51 (4 weeks ago) feat: 增加 workflows cicd 的环境映射配置文件\n    b38758a (5 days ago) feat: 触发打包\n"
        },
        {
          "name": "CI_ENVIRONMENT_NAME",
          "value": "dev"
        }
      ]
    },
    "conditions": [
      {
        "type": "PodRunning",
        "status": "True"
      },
      {
        "type": "Completed",
        "status": "True"
      }
    ],
    "resourcesDuration": {
      "cpu": 42,
      "memory": 475
    },
    "storedWorkflowTemplateSpec": {
      "templates": [
        {
          "name": "main",
          "inputs": {},
          "outputs": {},
          "metadata": {},
          "dag": {
            "tasks": [
              {
                "name": "clone",
                "template": "clone",
                "arguments": {
                  "parameters": [
                    {
                      "name": "WORKFLOWS_API_DOMAIN",
                      "value": "{{workflow.parameters.WORKFLOWS_API_DOMAIN}}"
                    },
                    {
                      "name": "WORKFLOWS_API_NAMESPACE",
                      "value": "{{workflow.parameters.WORKFLOWS_API_NAMESPACE}}"
                    },
                    {
                      "name": "WORKFLOWS_API_PROJECT_ID",
                      "value": "{{workflow.parameters.WORKFLOWS_API_PROJECT_ID}}"
                    },
                    {
                      "name": "WORKFLOWS_API_REPOSITORY",
                      "value": "{{workflow.parameters.WORKFLOWS_API_REPOSITORY}}"
                    },
                    {
                      "name": "WORKFLOWS_API_BRANCH",
                      "value": "{{workflow.parameters.WORKFLOWS_API_BRANCH}}"
                    },
                    {
                      "name": "GIT_REPOSITORY_URL",
                      "value": "{{workflow.parameters.GIT_REPOSITORY_URL}}"
                    },
                    {
                      "name": "GIT_PUSH_REF",
                      "value": "{{workflow.parameters.GIT_PUSH_REF}}"
                    },
                    {
                      "name": "GIT_CHECKOUT_SHA",
                      "value": "{{workflow.parameters.GIT_CHECKOUT_SHA}}"
                    },
                    {
                      "name": "GIT_REPOSITORY_NAME",
                      "value": "{{workflow.parameters.GIT_REPOSITORY_NAME}}"
                    }
                  ]
                }
              },
              {
                "name": "previous-commit-sha",
                "template": "get-previous-successful-commit-sha",
                "arguments": {
                  "parameters": [
                    {
                      "name": "WORKFLOWS_API_DOMAIN",
                      "value": "{{workflow.parameters.WORKFLOWS_API_DOMAIN}}"
                    },
                    {
                      "name": "WORKFLOWS_API_NAMESPACE",
                      "value": "{{workflow.parameters.WORKFLOWS_API_NAMESPACE}}"
                    },
                    {
                      "name": "WORKFLOWS_API_PROJECT_ID",
                      "value": "{{workflow.parameters.WORKFLOWS_API_PROJECT_ID}}"
                    },
                    {
                      "name": "WORKFLOWS_API_REPOSITORY",
                      "value": "{{workflow.parameters.WORKFLOWS_API_REPOSITORY}}"
                    },
                    {
                      "name": "WORKFLOWS_API_BRANCH",
                      "value": "{{workflow.parameters.WORKFLOWS_API_BRANCH}}"
                    },
                    {
                      "name": "CURRENT_GIT_CHECKOUT_SHA",
                      "value": "{{workflow.parameters.GIT_CHECKOUT_SHA}}",
                      "description": "本次CI的commit SHA值"
                    }
                  ]
                }
              },
              {
                "name": "change-log",
                "template": "change-log",
                "arguments": {
                  "parameters": [
                    {
                      "name": "PREVIOUS_CHECKOUT_SHA",
                      "value": "{{workflow.outputs.parameters.PREVIOUS_CHECKOUT_SHA}}"
                    },
                    {
                      "name": "GIT_CHECKOUT_SHA",
                      "value": "{{workflow.parameters.GIT_CHECKOUT_SHA}}"
                    },
                    {
                      "name": "GIT_PUSH_REF",
                      "value": "{{workflow.parameters.GIT_PUSH_REF}}"
                    }
                  ]
                },
                "depends": "clone.Succeeded && previous-commit-sha.Succeeded"
              },
              {
                "name": "notification",
                "template": "notification",
                "arguments": {
                  "parameters": [
                    {
                      "name": "PREVIOUS_CHECKOUT_SHA",
                      "value": "{{workflow.outputs.parameters.PREVIOUS_CHECKOUT_SHA}}"
                    },
                    {
                      "name": "GIT_REPOSITORY_URL",
                      "value": "{{workflow.parameters.GIT_REPOSITORY_URL}}"
                    },
                    {
                      "name": "GIT_PUSH_REF",
                      "value": "{{workflow.parameters.GIT_PUSH_REF}}"
                    },
                    {
                      "name": "GIT_REPOSITORY_NAME",
                      "value": "{{workflow.parameters.GIT_REPOSITORY_NAME}}"
                    },
                    {
                      "name": "TRIGGER_WORKFLOWS_JOB_AUTHOR",
                      "value": "{{workflow.parameters.TRIGGER_WORKFLOWS_JOB_AUTHOR}}"
                    },
                    {
                      "name": "GIT_CHECKOUT_SHA",
                      "value": "{{workflow.parameters.GIT_CHECKOUT_SHA}}"
                    },
                    {
                      "name": "PROJECT_ID",
                      "value": "{{workflow.parameters.WORKFLOWS_API_PROJECT_ID}}"
                    },
                    {
                      "name": "NOTIFICATION_CARD_TEMPLATE_ID",
                      "value": "{{workflow.parameters.NOTIFICATION_CARD_TEMPLATE_ID}}"
                    },
                    {
                      "name": "NOTIFICATION_OPEN_CONVERSATION_ID",
                      "value": "{{workflow.parameters.NOTIFICATION_OPEN_CONVERSATION_ID}}"
                    },
                    {
                      "name": "NOTIFICATION_DINGTALK_BOT_ADDR",
                      "value": "{{workflow.parameters.NOTIFICATION_DINGTALK_BOT_ADDR}}"
                    },
                    {
                      "name": "CHANGE_LOG",
                      "value": "{{tasks.change-log.outputs.parameters.CHANGE_LOG}}"
                    },
                    {
                      "name": "CI_ENVIRONMENT_NAME",
                      "value": "{{tasks.change-log.outputs.parameters.CI_ENVIRONMENT_NAME}}"
                    }
                  ]
                },
                "depends": "clone.Succeeded && change-log.Succeeded"
              },
              {
                "name": "preflight",
                "template": "preflight",
                "arguments": {
                  "parameters": [
                    {
                      "name": "GIT_PUSH_REF",
                      "value": "{{workflow.parameters.GIT_PUSH_REF}}"
                    },
                    {
                      "name": "GIT_CHECKOUT_SHA",
                      "value": "{{workflow.parameters.GIT_CHECKOUT_SHA}}"
                    },
                    {
                      "name": "PROJECT_DEPENDENCY_INCLUDE_GROUP_NAME",
                      "value": "{{workflow.parameters.PROJECT_DEPENDENCY_INCLUDE_GROUP_NAME}}"
                    },
                    {
                      "name": "GIT_BEFORE_SHA",
                      "value": "{{workflow.parameters.GIT_BEFORE_SHA}}"
                    },
                    {
                      "name": "PREVIOUS_CHECKOUT_SHA",
                      "value": "{{workflow.outputs.parameters.PREVIOUS_CHECKOUT_SHA}}"
                    },
                    {
                      "name": "_MANUAL_",
                      "value": "{{workflow.parameters._MANUAL_}}"
                    }
                  ]
                },
                "depends": "clone"
              },
              {
                "name": "build",
                "template": "build",
                "arguments": {
                  "artifacts": [
                    {
                      "name": "dependencies-list",
                      "from": "{{tasks.preflight.outputs.artifacts.dependencies-list}}"
                    }
                  ]
                },
                "depends": "preflight"
              },
              {
                "name": "result-to-json-list",
                "template": "result-to-json-list",
                "arguments": {
                  "artifacts": [
                    {
                      "name": "artifacts-list",
                      "from": "{{tasks.build.outputs.artifacts.artifacts-list}}"
                    }
                  ]
                },
                "depends": "build"
              },
              {
                "name": "docker-build",
                "template": "container",
                "arguments": {
                  "parameters": [
                    {
                      "name": "APPNAME",
                      "value": "{{item.appname}}"
                    },
                    {
                      "name": "CONTEXT_ROOT",
                      "value": "{{item.dir}}"
                    },
                    {
                      "name": "CI_REGISTRY_URL",
                      "value": "{{workflow.parameters.CI_REGISTRY_URL}}"
                    },
                    {
                      "name": "REGISTRY_CREDENTIAL_SECRET_NAME",
                      "value": "{{workflow.parameters.REGISTRY_CREDENTIAL_SECRET_NAME}}"
                    },
                    {
                      "name": "CI_COMMIT_SHORT_SHA",
                      "value": "{{workflow.outputs.parameters.CI_COMMIT_SHORT_SHA}}"
                    },
                    {
                      "name": "CONTAINER_PLATFORM",
                      "value": "linux/amd64"
                    }
                  ]
                },
                "withParam": "{{tasks.result-to-json-list.outputs.result}}",
                "depends": "result-to-json-list.Succeeded"
              },
              {
                "name": "sync-deploy",
                "template": "sync-deploy",
                "arguments": {
                  "parameters": [
                    {
                      "name": "GIT_DEPLOY_REPOSITORY_URL",
                      "value": "{{workflow.parameters.GIT_DEPLOY_REPOSITORY_URL}}"
                    },
                    {
                      "name": "aggregate-results",
                      "value": "{{tasks.docker-build.outputs.result}}"
                    },
                    {
                      "name": "GIT_DEPLOY_BRANCH_NAME",
                      "value": "{{workflow.parameters.GIT_DEPLOY_BRANCH_NAME}}"
                    }
                  ]
                },
                "depends": "docker-build.Succeeded"
              }
            ]
          }
        },
        {
          "name": "clone",
          "inputs": {
            "parameters": [
              {
                "name": "WORKFLOWS_API_DOMAIN"
              },
              {
                "name": "WORKFLOWS_API_NAMESPACE"
              },
              {
                "name": "WORKFLOWS_API_PROJECT_ID"
              },
              {
                "name": "WORKFLOWS_API_REPOSITORY"
              },
              {
                "name": "WORKFLOWS_API_BRANCH"
              },
              {
                "name": "GIT_REPOSITORY_URL"
              },
              {
                "name": "GIT_PUSH_REF",
                "value": "main"
              },
              {
                "name": "TRIGGER_ACCOUNT",
                "value": "user-01"
              },
              {
                "name": "GIT_CHECKOUT_SHA"
              },
              {
                "name": "GIT_REPOSITORY_NAME"
              },
              {
                "name": "OBJECT_KIND",
                "value": "push"
              },
              {
                "name": "PREVIOUS_CHECKOUT_SHA",
                "value": "/tmp/git/PREVIOUS_CHECKOUT_SHA"
              }
            ]
          },
          "outputs": {
            "parameters": [
              {
                "name": "CI_COMMIT_SHORT_SHA",
                "valueFrom": {
                  "path": "/tmp/CI_COMMIT_SHORT_SHA"
                },
                "globalName": "CI_COMMIT_SHORT_SHA"
              },
              {
                "name": "CI_COMMIT_MESSAGE",
                "valueFrom": {
                  "path": "/tmp/CI_COMMIT_MESSAGE"
                },
                "globalName": "CI_COMMIT_MESSAGE"
              }
            ]
          },
          "metadata": {},
          "container": {
            "name": "git",
            "image": "fcr.xxxx.xxxx.xx/bitnami/git@sha256:c01f7167dcd8d680a5bef264cc8213e1648e247ec739d6b15ee98ef5a1b0a467",
            "command": [
              "bash",
              "-euc"
            ],
            "args": [
              "## Login settings\ncase xxxxxxx"
            ],
            "workingDir": "/workspace",
            "env": [
              {
                "name": "GIT_REPOSITORY_URL",
                "value": "{{inputs.parameters.GIT_REPOSITORY_URL}}"
              },
              {
                "name": "GIT_PUSH_REF",
                "value": "{{inputs.parameters.GIT_PUSH_REF}}"
              },
              {
                "name": "GIT_USER",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "git-repository-credential",
                    "key": "GIT_USER"
                  }
                }
              },
              {
                "name": "GIT_pawwwword",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "git-repository-credential",
                    "key": "GIT_pawwwword"
                  }
                }
              },
              {
                "name": "GIT_CREDENTIAL_TYPE",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "git-repository-credential",
                    "key": "GIT_CREDENTIAL_TYPE"
                  }
                }
              },
              {
                "name": "GIT_SSH_PRIVATEKEY",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "git-repository-credential",
                    "key": "GIT_SSH_PRIVATEKEY",
                    "optional": true
                  }
                }
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "workspace",
                "mountPath": "/workspace"
              }
            ]
          }
        },
        {
          "name": "get-previous-successful-commit-sha",
          "inputs": {
            "parameters": [
              {
                "name": "WORKFLOWS_API_DOMAIN"
              },
              {
                "name": "WORKFLOWS_API_NAMESPACE"
              },
              {
                "name": "WORKFLOWS_API_PROJECT_ID"
              },
              {
                "name": "WORKFLOWS_API_REPOSITORY"
              },
              {
                "name": "WORKFLOWS_API_BRANCH"
              },
              {
                "name": "PREVIOUS_CHECKOUT_SHA",
                "value": "/tmp/PREVIOUS_CHECKOUT_SHA"
              },
              {
                "name": "CURRENT_GIT_CHECKOUT_SHA",
                "description": "本次任务的 Commit SHA 值，用于判断是否重复执行任务"
              }
            ]
          },
          "outputs": {
            "parameters": [
              {
                "name": "PREVIOUS_CHECKOUT_SHA",
                "valueFrom": {
                  "path": "/tmp/PREVIOUS_CHECKOUT_SHA"
                },
                "globalName": "PREVIOUS_CHECKOUT_SHA"
              }
            ]
          },
          "metadata": {},
          "container": {
            "name": "workflow-previous-commit-sha",
            "image": "my-mock-user/git-yq:2.44",
            "command": [
              "bash",
              "-c"
            ],
            "args": [
              "echo \"INFO: Starting get last prxxxxxxx"
            ],
            "workingDir": "/workspace",
            "env": [
              {
                "name": "ANNOTATION_CHECKOUT_SHA_NAME",
                "value": "trigger.workflows.job/CHECKOUT_SHA"
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "argo-workflows-operator-token",
                "mountPath": "/var/run/kubernetes/argo-workflows-token",
                "subPath": "token"
              }
            ]
          },
          "metrics": {
            "prometheus": [
              {
                "name": "ci_result_task_counter",
                "labels": [
                  {
                    "key": "stage",
                    "value": "clone"
                  },
                  {
                    "key": "branch",
                    "value": "{{ workflow.parameters.GIT_PUSH_REF }}"
                  },
                  {
                    "key": "status",
                    "value": "{{ status }}"
                  }
                ],
                "help": "Count of task execution by result status - task level",
                "counter": {
                  "value": "1"
                }
              }
            ]
          }
        },
        {
          "name": "change-log",
          "inputs": {
            "parameters": [
              {
                "name": "PREVIOUS_CHECKOUT_SHA",
                "value": "0000000000000000000000000000000000000000",
                "description": "上一次成功执行任务的SHA,默认值0000000000000000000000000000000000000000"
              },
              {
                "name": "GIT_CHECKOUT_SHA",
                "description": "本次触发任务的 SHA"
              },
              {
                "name": "GIT_PUSH_REF"
              }
            ]
          },
          "outputs": {
            "parameters": [
              {
                "name": "CHANGE_LOG",
                "valueFrom": {
                  "path": "/tmp/changelog.txt"
                },
                "globalName": "CHANGE_LOG",
                "description": "Git Change Log 内容"
              },
              {
                "name": "CI_ENVIRONMENT_NAME",
                "valueFrom": {
                  "path": "/tmp/CI_ENVIRONMENT_NAME.txt"
                },
                "globalName": "CI_ENVIRONMENT_NAME",
                "description": "发布环境名称"
              }
            ]
          },
          "metadata": {},
          "container": {
            "name": "commit-logs",
            "image": "fcr.xxxx.xxxx.xx/bitnami/git@sha256:c01f7167dcd8d680a5bef264cc8213e1648e247ec739d6b15ee98ef5a1b0a467",
            "command": [
              "bash",
              "-ec"
            ],
            "args": [
              "set -x\n## 开始处理分支与环境的对应关系xxxxx"
            ],
            "workingDir": "/workspace",
            "env": [
              {
                "name": "PREVIOUS_CHECKOUT_SHA",
                "value": "{{inputs.parameters.PREVIOUS_CHECKOUT_SHA}}"
              },
              {
                "name": "GIT_CHECKOUT_SHA",
                "value": "{{inputs.parameters.GIT_CHECKOUT_SHA}}"
              },
              {
                "name": "GIT_PUSH_REF",
                "value": "{{inputs.parameters.GIT_PUSH_REF}}"
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "workspace",
                "mountPath": "/workspace"
              }
            ]
          }
        },
        {
          "name": "notification",
          "inputs": {
            "parameters": [
              {
                "name": "PREVIOUS_CHECKOUT_SHA",
                "value": "0000000000000000000000000000000000000000",
                "description": "上一次成功执行任务的SHA,默认值0000000000000000000000000000000000000000"
              },
              {
                "name": "GIT_CHECKOUT_SHA",
                "description": "本次触发任务的 SHA"
              },
              {
                "name": "GIT_REPOSITORY_URL"
              },
              {
                "name": "GIT_PUSH_REF"
              },
              {
                "name": "GIT_REPOSITORY_NAME"
              },
              {
                "name": "TRIGGER_WORKFLOWS_JOB_AUTHOR"
              },
              {
                "name": "NOTIFICATION_DINGTALK_BOT_ADDR",
                "value": "http://dingtalk-bot.workflows.svc:8000"
              },
              {
                "name": "PROJECT_ID",
                "description": "源码仓库项目的ID"
              },
              {
                "name": "NOTIFICATION_CARD_TEMPLATE_ID",
                "description": "互动卡片模板ID"
              },
              {
                "name": "NOTIFICATION_OPEN_CONVERSATION_ID",
                "description": "互动卡片投递群聊ID"
              },
              {
                "name": "CHANGE_LOG",
                "description": "Git Change Log"
              },
              {
                "name": "CI_ENVIRONMENT_NAME",
                "description": "发布环境名称"
              }
            ]
          },
          "outputs": {},
          "metadata": {},
          "container": {
            "name": "commit-logs",
            "image": "fcr.xxxx.xxxx.xx/bitnami/git@sha256:c01f7167dcd8d680a5bef264cc8213e1648e247ec739d6b15ee98ef5a1b0a467",
            "command": [
              "bash",
              "-ec"
            ],
            "args": [
              "set -x\nfunction post_notification()xxxxx"
            ],
            "workingDir": "/workspace",
            "env": [
              {
                "name": "PREVIOUS_CHECKOUT_SHA",
                "value": "{{inputs.parameters.PREVIOUS_CHECKOUT_SHA}}"
              },
              {
                "name": "TRIGGER_WORKFLOWS_JOB_AUTHOR",
                "value": "{{inputs.parameters.TRIGGER_WORKFLOWS_JOB_AUTHOR}}"
              },
              {
                "name": "GIT_CHECKOUT_SHA",
                "value": "{{inputs.parameters.GIT_CHECKOUT_SHA}}"
              },
              {
                "name": "GIT_PUSH_REF",
                "value": "{{inputs.parameters.GIT_PUSH_REF}}"
              },
              {
                "name": "NOTIFICATION_CARD_TEMPLATE_ID",
                "value": "{{inputs.parameters.NOTIFICATION_CARD_TEMPLATE_ID}}"
              },
              {
                "name": "NOTIFICATION_OPEN_CONVERSATION_ID",
                "value": "{{inputs.parameters.NOTIFICATION_OPEN_CONVERSATION_ID}}"
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "workspace",
                "mountPath": "/workspace"
              }
            ]
          }
        },
        {
          "name": "preflight",
          "inputs": {
            "parameters": [
              {
                "name": "PREVIOUS_CHECKOUT_SHA",
                "value": "0000000000000000000000000000000000000000",
                "description": "上一次成功执行任务的SHA,默认值0000000000000000000000000000000000000000"
              },
              {
                "name": "GIT_PUSH_REF"
              },
              {
                "name": "GIT_CHECKOUT_SHA"
              },
              {
                "name": "GIT_BEFORE_SHA"
              },
              {
                "name": "PROJECT_DEPENDENCY_INCLUDE_GROUP_NAME",
                "value": "{{workflow.parameters.PROJECT_DEPENDENCY_INCLUDE_GROUP_NAME}}"
              },
              {
                "name": "MAVEN_LOCAL_REPO_DIR",
                "value": "/workspace/repository"
              },
              {
                "name": "CI_ENVIRONMENT_NAME",
                "value": "{{workflow.parameters.CI_ENVIRONMENT_NAME}}"
              },
              {
                "name": "MAVEN_OPTS",
                "value": "-Dhttps.protocols=TLSv1.2 -Dmaven.repo.local=$(MAVEN_LOCAL_REPO_DIR) -Dorg.slf4j.simpleLogger.showDateTime=false -Djava.awt.headless=true"
              },
              {
                "name": "MAVEN_CLI_OPTS",
                "value": "--batch-mode --no-transfer-progress --threads=1 --settings /workspace/settings.xml -Dmaven.test.skip=true -P k8s --fail-at-end -X"
              },
              {
                "name": "_MANUAL_",
                "value": "false"
              }
            ]
          },
          "outputs": {
            "parameters": [
              {
                "name": "CI_ENVIRONMENT_NAME",
                "valueFrom": {
                  "path": "/tmp/CI_ENVIRONMENT_NAME"
                },
                "globalName": "CI_ENVIRONMENT_NAME"
              }
            ],
            "artifacts": [
              {
                "name": "dependencies-list",
                "path": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
              }
            ]
          },
          "metadata": {},
          "container": {
            "name": "",
            "image": "fcr.xxxx.xxxx.xx/maven:3.9-eclipse-tumurin-17",
            "command": [
              "bash",
              "-c"
            ],
            "args": [
              "# 日志函数\nlog_info() { echo xxxxxx"
            ],
            "workingDir": "/workspace",
            "env": [
              {
                "name": "GIT_PUSH_REF",
                "value": "{{inputs.parameters.GIT_PUSH_REF}}"
              },
              {
                "name": "GIT_CHECKOUT_SHA",
                "value": "{{inputs.parameters.GIT_CHECKOUT_SHA}}"
              },
              {
                "name": "MAVEN_LOCAL_REPO_DIR",
                "value": "{{inputs.parameters.MAVEN_LOCAL_REPO_DIR}}"
              },
              {
                "name": "MAVEN_OPTS",
                "value": "{{inputs.parameters.MAVEN_OPTS}}"
              },
              {
                "name": "MAVEN_CLI_OPTS",
                "value": "{{inputs.parameters.MAVEN_CLI_OPTS}}"
              },
              {
                "name": "MAVEN_BUILD_PROJECT_DIR_FILE",
                "value": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
              },
              {
                "name": "PROJECT_DEPENDENCY_TREE_FILE",
                "value": "dependencies.txt"
              },
              {
                "name": "CI_ENVIRONMENT_NAME",
                "value": "{{inputs.parameters.CI_ENVIRONMENT_NAME}}"
              },
              {
                "name": "CI_DEBUG_TRACE",
                "value": "{{workflow.parameters.CI_DEBUG_TRACE}}"
              },
              {
                "name": "MVN_LOG_FILE",
                "value": "mvn.log"
              },
              {
                "name": "_MANUAL_",
                "value": "{{inputs.parameters._MANUAL_}}"
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "workspace",
                "mountPath": "/workspace"
              },
              {
                "name": "maven-settings",
                "mountPath": "/workspace/settings.xml",
                "subPath": "settings.xml"
              },
              {
                "name": "maven-repository-cache",
                "mountPath": "/workspace/repository"
              }
            ]
          }
        },
        {
          "name": "build",
          "inputs": {
            "parameters": [
              {
                "name": "MAVEN_LOCAL_REPO_DIR",
                "value": "/workspace/repository"
              },
              {
                "name": "MAVEN_OPTS",
                "value": "-Dhttps.protocols=TLSv1.2 -Dmaven.repo.local=$(MAVEN_LOCAL_REPO_DIR) -Dorg.slf4j.simpleLogger.showDateTime=true -Djava.awt.headless=true"
              },
              {
                "name": "MAVEN_CLI_OPTS",
                "value": "--batch-mode --errors --fail-at-end --show-version --no-transfer-progress --threads=4 --settings /workspace/settings.xml -DinstallAtEnd=true -DdeployAtEnd=true -Dmaven.test.skip=true -P k8s"
              }
            ],
            "artifacts": [
              {
                "name": "dependencies-list",
                "path": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
              }
            ]
          },
          "outputs": {
            "artifacts": [
              {
                "name": "artifacts-list",
                "path": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
              }
            ]
          },
          "metadata": {},
          "script": {
            "name": "maven-build",
            "image": "fcr.xxxx.xxxx.xx/maven:3.9-eclipse-tumurin-17",
            "command": [
              "bash",
              "-e"
            ],
            "workingDir": "/workspace",
            "env": [
              {
                "name": "_MANUAL_",
                "value": "{{workflow.parameters._MANUAL_}}"
              },
              {
                "name": "MAVEN_LOCAL_REPO_DIR",
                "value": "{{inputs.parameters.MAVEN_LOCAL_REPO_DIR}}"
              },
              {
                "name": "MAVEN_BUILD_PROJECT_DIR_FILE",
                "value": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
              },
              {
                "name": "MAVEN_OPTS",
                "value": "{{inputs.parameters.MAVEN_OPTS}}"
              },
              {
                "name": "MAVEN_CLI_OPTS",
                "value": "{{inputs.parameters.MAVEN_CLI_OPTS}}"
              },
              {
                "name": "CI_DEBUG_TRACE",
                "value": "{{workflow.parameters.CI_DEBUG_TRACE}}"
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "workspace",
                "mountPath": "/workspace"
              },
              {
                "name": "maven-settings",
                "mountPath": "/workspace/settings.xml",
                "subPath": "settings.xml"
              },
              {
                "name": "maven-repository-cache",
                "mountPath": "/workspace/repository"
              }
            ],
            "source": "# Debug Mode\nif [[ ${CI_DEBUG_TRACE} == true ]]; xxxxx"
          }
        },
        {
          "name": "result-to-json-list",
          "inputs": {
            "artifacts": [
              {
                "name": "artifacts-list",
                "path": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
              }
            ]
          },
          "outputs": {},
          "metadata": {},
          "script": {
            "name": "regular-to-json",
            "image": "my-mock-user/git-yq:2.42",
            "command": [
              "bash",
              "-e"
            ],
            "env": [
              {
                "name": "MAVEN_BUILD_PROJECT_DIR_FILE",
                "value": "{{workflow.parameters.MAVEN_BUILD_PROJECT_DIR_FILE}}"
              }
            ],
            "resources": {},
            "source": "cat ${MAVEN_BUILD_PROJECT_DIR_FILE} | jq -MRn '[inputs]|map(split(\" \") | {\"app\":.[0],\"dir\":.[1],\"jar_path\":.[2],\"appname\":.[3]})'\n"
          }
        },
        {
          "name": "container",
          "inputs": {
            "parameters": [
              {
                "name": "APPNAME"
              },
              {
                "name": "CONTEXT_ROOT"
              },
              {
                "name": "CI_REGISTRY_URL"
              },
              {
                "name": "REGISTRY_CREDENTIAL_SECRET_NAME"
              },
              {
                "name": "CI_COMMIT_SHORT_SHA"
              },
              {
                "name": "CI_ENVIRONMENT_NAME",
                "value": "{{workflow.outputs.parameters.CI_ENVIRONMENT_NAME}}"
              },
              {
                "name": "CONTAINER_PLATFORM"
              },
              {
                "name": "PUSH_RETRY",
                "value": "5"
              }
            ]
          },
          "outputs": {},
          "metadata": {},
          "container": {
            "name": "podman",
            "image": "quay.io/podman/stable:v5",
            "command": [
              "bash",
              "-ec"
            ],
            "args": [
              "## 这个任务的 stdout 必须为一xxxxx"
            ],
            "workingDir": "/workspace",
            "env": [
              {
                "name": "APPNAME",
                "value": "{{inputs.parameters.APPNAME}}"
              },
              {
                "name": "CONTEXT_ROOT",
                "value": "{{inputs.parameters.CONTEXT_ROOT}}"
              },
              {
                "name": "CI_REGISTRY_URL",
                "value": "{{inputs.parameters.CI_REGISTRY_URL}}"
              },
              {
                "name": "CI_COMMIT_SHORT_SHA",
                "value": "{{inputs.parameters.CI_COMMIT_SHORT_SHA}}"
              },
              {
                "name": "CI_ENVIRONMENT_NAME",
                "value": "{{inputs.parameters.CI_ENVIRONMENT_NAME}}"
              },
              {
                "name": "CONTAINER_PLATFORM",
                "value": "{{inputs.parameters.CONTAINER_PLATFORM}}"
              },
              {
                "name": "PUSH_RETRY",
                "value": "{{inputs.parameters.PUSH_RETRY}}"
              },
              {
                "name": "REGISTRY_USER",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "{{inputs.parameters.REGISTRY_CREDENTIAL_SECRET_NAME}}",
                    "key": "REGISTRY_USER"
                  }
                }
              },
              {
                "name": "REGISTRY_pawwwword",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "{{inputs.parameters.REGISTRY_CREDENTIAL_SECRET_NAME}}",
                    "key": "REGISTRY_pawwwword"
                  }
                }
              }
            ],
            "resources": {
              "limits": {
                "cpu": "4",
                "memory": "1500Mi"
              },
              "requests": {
                "cpu": "500m",
                "memory": "800Mi"
              }
            },
            "volumeMounts": [
              {
                "name": "workspace",
                "mountPath": "/workspace"
              },
              {
                "name": "config-json",
                "mountPath": "/run/containers/0/"
              }
            ],
            "securityContext": {
              "privileged": true
            }
          },
          "volumes": [
            {
              "name": "config-json",
              "emptyDir": {}
            }
          ],
          "initContainers": [
            {
              "name": "registry-login",
              "image": "docker:cli",
              "command": [
                "sh",
                "-ec"
              ],
              "args": [
                "docker login --username xxxxxx"
              ],
              "env": [
                {
                  "name": "REGISTRY_USER",
                  "valueFrom": {
                    "secretKeyRef": {
                      "name": "{{inputs.parameters.REGISTRY_CREDENTIAL_SECRET_NAME}}",
                      "key": "REGISTRY_USER"
                    }
                  }
                },
                {
                  "name": "REGISTRY_pawwwword",
                  "valueFrom": {
                    "secretKeyRef": {
                      "name": "{{inputs.parameters.REGISTRY_CREDENTIAL_SECRET_NAME}}",
                      "key": "REGISTRY_pawwwword"
                    }
                  }
                }
              ],
              "resources": {},
              "volumeMounts": [
                {
                  "name": "config-json",
                  "mountPath": "/run/containers/0/"
                }
              ]
            }
          ]
        },
        {
          "name": "sync-deploy",
          "inputs": {
            "parameters": [
              {
                "name": "GIT_DEPLOY_REPOSITORY_URL"
              },
              {
                "name": "CI_ENVIRONMENT_NAME",
                "value": "{{workflow.outputs.parameters.CI_COMMIT_SHORT_SHA}}"
              },
              {
                "name": "GIT_REPOSITORY_URL",
                "value": "{{workflow.parameters.GIT_REPOSITORY_URL}}"
              },
              {
                "name": "GIT_DEPLOY_BRANCH_NAME",
                "value": "main"
              },
              {
                "name": "aggregate-results"
              }
            ]
          },
          "outputs": {},
          "metadata": {},
          "script": {
            "name": "git-yq",
            "image": "my-mock-user/git-yq:2.44",
            "command": [
              "bash",
              "-e"
            ],
            "workingDir": "/workspace",
            "env": [
              {
                "name": "CI_ENVIRONMENT_NAME",
                "value": "{{inputs.parameters.CI_ENVIRONMENT_NAME}}"
              },
              {
                "name": "GIT_USER",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "git-deploy-repository-credential",
                    "key": "GIT_USER"
                  }
                }
              },
              {
                "name": "GIT_pawwwword",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "git-deploy-repository-credential",
                    "key": "GIT_pawwwword"
                  }
                }
              },
              {
                "name": "GIT_CREDENTIAL_TYPE",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "git-deploy-repository-credential",
                    "key": "GIT_CREDENTIAL_TYPE"
                  }
                }
              },
              {
                "name": "GIT_SSH_PRIVATEKEY",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "git-deploy-repository-credential",
                    "key": "GIT_SSH_PRIVATEKEY",
                    "optional": true
                  }
                }
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "workspace",
                "mountPath": "/workspace"
              }
            ],
            "source": "## Login settings\ncase \"${GIT_CREDENTIAL_TYPE}\" xxxxxx"
          }
        }
      ],
      "entrypoint": "main",
      "arguments": {
        "parameters": [
          {
            "name": "_MANUAL_",
            "value": "false",
            "description": "是否进行全量发布"
          },
          {
            "name": "GIT_REPOSITORY_URL",
            "value": "https://gitlab.xxxx.xxxx.xx/fawve/finance.git",
            "description": "源码仓库地址,此值通过sensor进行注入"
          },
          {
            "name": "GIT_PUSH_REF",
            "value": "main",
            "description": "触发任务的分支"
          },
          {
            "name": "PREVIOUS_CHECKOUT_SHA",
            "value": "",
            "description": "上一次成功任务的 Git Checkout SHA"
          },
          {
            "name": "GIT_REPOSITORY_NAME",
            "value": "finance",
            "description": "仓库名称"
          },
          {
            "name": "GIT_CHECKOUT_SHA",
            "value": "b38758a4d38cd25468a9ab11c888a9b4bbc318b2",
            "description": "本次提交的 SHA"
          },
          {
            "name": "GIT_BEFORE_SHA",
            "value": "d67ea3643e87d813cbd8ff069a3d1e2710cacf57",
            "description": "上一个提交的 SHA"
          },
          {
            "name": "PROJECT_DEPENDENCY_INCLUDE_GROUP_NAME",
            "value": "",
            "description": "对于 MonoRepo 进行依赖检测需要提供统一的 Maven Reactor group name"
          },
          {
            "name": "MAVEN_BUILD_PROJECT_DIR_FILE",
            "value": "/workspace/BUILD.txt",
            "description": "临时文件"
          },
          {
            "name": "CI_ENVIRONMENT_NAME",
            "value": "main",
            "description": "环境名称,此值通过GIT_PUSH_REF进行覆盖,分支即环境"
          },
          {
            "name": "CI_REGISTRY_URL",
            "value": "https://registry.xxxx.xxxx.xx",
            "description": "容器镜像 Registry URL"
          },
          {
            "name": "REGISTRY_CREDENTIAL_SECRET_NAME",
            "value": "container-registry-credential",
            "description": "容器镜像仓库的认证信息 Secret"
          },
          {
            "name": "CONTAINER_PLATFORM",
            "value": "linux/arm64",
            "description": "平台 linux/amd64  linux/arm64"
          },
          {
            "name": "GIT_DEPLOY_REPOSITORY_URL",
            "value": "https://gitlab.xxxx.xxxx.xx/fawve/deploy.git",
            "description": "发布仓库"
          },
          {
            "name": "WORKFLOWS_API_DOMAIN",
            "value": "workflows.xxxx.xxxx.xx",
            "description": "workflows server 外部域名"
          },
          {
            "name": "WORKFLOWS_API_NAMESPACE",
            "value": "workflows",
            "description": "workflows API 即任务名称空间"
          },
          {
            "name": "WORKFLOWS_API_PROJECT_ID",
            "value": "7",
            "description": "workflows API 任务的 Project ID"
          },
          {
            "name": "WORKFLOWS_API_REPOSITORY",
            "value": "finance",
            "description": "workflows API 项目代码仓库"
          },
          {
            "name": "WORKFLOWS_API_BRANCH",
            "value": "main",
            "description": "workflows API 项目代码分支"
          },
          {
            "name": "TRIGGER_WORKFLOWS_JOB_AUTHOR",
            "value": "Eric",
            "description": "git提交的提交人员"
          },
          {
            "name": "CI_DEBUG_TRACE",
            "value": "false",
            "description": "任务执行 debug mode"
          },
          {
            "name": "GIT_DEPLOY_BRANCH_NAME",
            "value": "main",
            "description": "发布仓库主分支"
          },
          {
            "name": "NOTIFICATION_DINGTALK_BOT_ADDR",
            "value": "http://dingtalk-bot.argo-workflows.svc.cluster.local:8000",
            "description": "DingTalk Bot 机器人的调用域名"
          },
          {
            "name": "NOTIFICATION_CARD_TEMPLATE_ID",
            "value": "98a61096-31e1-4611-be4e-b1d2f6897225.schema",
            "description": "互动卡片模板ID"
          },
          {
            "name": "NOTIFICATION_OPEN_CONVERSATION_ID",
            "value": "cidUQXUpOwFEbiRNp87JyFE3w==",
            "description": "互动卡片群组ID"
          }
        ]
      },
      "serviceAccountName": "argo-workflow",
      "volumes": [
        {
          "name": "maven-settings",
          "configMap": {
            "name": "maven-settings"
          }
        },
        {
          "name": "maven-repository-cache",
          "persistentVolumeClaim": {
            "claimName": "maven-repository-cache"
          }
        },
        {
          "name": "argo-workflows-operator-token",
          "secret": {
            "secretName": "argo-workflow-operate-sa-token",
            "optional": true
          }
        }
      ],
      "volumeClaimTemplates": [
        {
          "metadata": {
            "name": "workspace",
            "creationTimestamp": null
          },
          "spec": {
            "accessModes": [
              "ReadWriteMany"
            ],
            "resources": {
              "requests": {
                "storage": "8Gi"
              }
            },
            "storageClassName": "nfs-client"
          },
          "status": {}
        }
      ],
      "imagePullSecrets": [
        {
          "name": "docker-registry-secret"
        }
      ],
      "ttlStrategy": {
        "secondsAfterCompletion": 5184000
      },
      "activeDeadlineSeconds": 28800,
      "podGC": {
        "strategy": "OnPodSuccess"
      },
      "shutdown": "Terminate",
      "workflowTemplateRef": {
        "name": "ci-java-jagat"
      }
    },
    "artifactRepositoryRef": {
      "default": true,
      "artifactRepository": {
        "archiveLogs": true,
        "s3": {
          "endpoint": "minio.minio.svc.cluster.local:9000",
          "bucket": "argo-bucket",
          "region": "home",
          "insecure": true,
          "accessKeySecret": {
            "name": "minio-workflows-secret",
            "key": "accesskey"
          },
          "secretKeySecret": {
            "name": "minio-workflows-secret",
            "key": "secretkey"
          }
        }
      }
    },
    "artifactGCStatus": {
      "notSpecified": true
    },
    "taskResultsCompletionStatus": {
      "cicd-java-main-finance-b38758a4-hhjbb-2131133452": true,
      "cicd-java-main-finance-b38758a4-hhjbb-2449782576": true,
      "cicd-java-main-finance-b38758a4-hhjbb-2553748563": true,
      "cicd-java-main-finance-b38758a4-hhjbb-2561201363": true,
      "cicd-java-main-finance-b38758a4-hhjbb-258446681": true,
      "cicd-java-main-finance-b38758a4-hhjbb-2775002877": true,
      "cicd-java-main-finance-b38758a4-hhjbb-3342717902": true,
      "cicd-java-main-finance-b38758a4-hhjbb-3369515995": true,
      "cicd-java-main-finance-b38758a4-hhjbb-359253584": true,
      "cicd-java-main-finance-b38758a4-hhjbb-3883381747": true,
      "cicd-java-main-finance-b38758a4-hhjbb-4034592005": true
    }
  }
}